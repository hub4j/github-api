{
  "sha": "baad7a7c4cf409f610a0e8c7eba17664eb655c44",
  "node_id": "MDQ6QmxvYjYxNzIxMDpiYWFkN2E3YzRjZjQwOWY2MTBhMGU4YzdlYmExNzY2NGViNjU1YzQ0",
  "size": 35946,
  "url": "https://api.github.com/repos/hub4j/github-api/git/blobs/baad7a7c4cf409f610a0e8c7eba17664eb655c44",
  "content": "cGFja2FnZSBvcmcua29oc3VrZS5naXRodWI7CgppbXBvcnQgY29tLmdvb2ds\nZS5jb21tb24uYmFzZS5QcmVkaWNhdGU7CmltcG9ydCBjb20uZ29vZ2xlLmNv\nbW1vbi5jb2xsZWN0Lkl0ZXJhYmxlczsKaW1wb3J0IGNvbS5nb29nbGUuY29t\nbW9uLmNvbGxlY3QuTGlzdHM7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25z\nLmlvLklPVXRpbHM7CmltcG9ydCBvcmcuanVuaXQuSWdub3JlOwppbXBvcnQg\nb3JnLmp1bml0LlRlc3Q7CmltcG9ydCBvcmcua29oc3VrZS5naXRodWIuR0hD\nb21taXQuRmlsZTsKaW1wb3J0IG9yZy5rb2hzdWtlLmdpdGh1Yi5HSE9yZ2Fu\naXphdGlvbi5QZXJtaXNzaW9uOwoKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5u\nZXQuVVJMOwppbXBvcnQgamF2YS51dGlsLio7CmltcG9ydCBqYXZhLnV0aWwu\nTWFwLkVudHJ5OwppbXBvcnQgamF2YS51dGlsLnJlZ2V4LlBhdHRlcm47Cgpp\nbXBvcnQgc3RhdGljIG9yZy5oYW1jcmVzdC5Db3JlTWF0Y2hlcnMuKjsKaW1w\nb3J0IHN0YXRpYyBvcmcuaGFtY3Jlc3QuTWF0Y2hlcnMuY29udGFpbnM7Cmlt\ncG9ydCBzdGF0aWMgb3JnLmhhbWNyZXN0Lk1hdGNoZXJzLmhhc1Byb3BlcnR5\nOwoKLyoqCiAqIFVuaXQgdGVzdCBmb3Igc2ltcGxlIEFwcC4KICovCnB1Ymxp\nYyBjbGFzcyBBcHBUZXN0IGV4dGVuZHMgQWJzdHJhY3RHaXRIdWJXaXJlTW9j\na1Rlc3QgewogICAgc3RhdGljIGZpbmFsIFN0cmluZyBHSVRIVUJfQVBJX1RF\nU1RfUkVQTyA9ICJnaXRodWItYXBpLXRlc3QiOwoKICAgIEBUZXN0CiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UmVwb0NSVUQoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBTdHJpbmcgdGFyZ2V0TmFtZSA9ICJnaXRodWItYXBpLXRlc3Qt\ncmVuYW1lMiI7CgogICAgICAgIGNsZWFudXBVc2VyUmVwb3NpdG9yeSgiZ2l0\naHViLWFwaS10ZXN0LXJlbmFtZSIpOwogICAgICAgIGNsZWFudXBVc2VyUmVw\nb3NpdG9yeSh0YXJnZXROYW1lKTsKCiAgICAgICAgR0hSZXBvc2l0b3J5IHIg\nPSBnaXRIdWIuY3JlYXRlUmVwb3NpdG9yeSgiZ2l0aHViLWFwaS10ZXN0LXJl\nbmFtZSIsICJhIHRlc3QgcmVwb3NpdG9yeSIsICJodHRwOi8vZ2l0aHViLWFw\naS5rb2hzdWtlLm9yZy8iLCB0cnVlKTsKICAgICAgICBhc3NlcnRUaGF0KHIu\naGFzSXNzdWVzKCksIGlzKHRydWUpKTsKCiAgICAgICAgci5lbmFibGVJc3N1\nZVRyYWNrZXIoZmFsc2UpOwogICAgICAgIHIuZW5hYmxlRG93bmxvYWRzKGZh\nbHNlKTsKICAgICAgICByLmVuYWJsZVdpa2koZmFsc2UpOwogICAgICAgIHIu\ncmVuYW1lVG8odGFyZ2V0TmFtZSk7CiAgICAgICAgZ2V0VXNlcigpLmdldFJl\ncG9zaXRvcnkodGFyZ2V0TmFtZSkuZGVsZXRlKCk7CiAgICB9CgogICAgQFRl\nc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RSZXBvc2l0b3J5V2l0aEF1dG9Jbml0\naWFsaXphdGlvbkNSVUQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBT\ndHJpbmcgbmFtZSA9ICJnaXRodWItYXBpLXRlc3QtYXV0b2luaXQiOwogICAg\nICAgIGNsZWFudXBVc2VyUmVwb3NpdG9yeShuYW1lKTsKICAgICAgICBHSFJl\ncG9zaXRvcnkgciA9IGdpdEh1Yi5jcmVhdGVSZXBvc2l0b3J5KG5hbWUpCiAg\nICAgICAgICAgIC5kZXNjcmlwdGlvbigiYSB0ZXN0IHJlcG9zaXRvcnkgZm9y\nIGF1dG8gaW5pdCIpCiAgICAgICAgICAgIC5ob21lcGFnZSgiaHR0cDovL2dp\ndGh1Yi1hcGkua29oc3VrZS5vcmcvIikKICAgICAgICAgICAgLmF1dG9Jbml0\nKHRydWUpLmNyZWF0ZSgpOwogICAgICAgIHIuZW5hYmxlSXNzdWVUcmFja2Vy\nKGZhbHNlKTsKICAgICAgICByLmVuYWJsZURvd25sb2FkcyhmYWxzZSk7CiAg\nICAgICAgci5lbmFibGVXaWtpKGZhbHNlKTsKICAgICAgICBpZiAobW9ja0dp\ndEh1Yi5pc1VzZVByb3h5KCkpIHsKICAgICAgICAgICAgVGhyZWFkLnNsZWVw\nKDMwMDApOwogICAgICAgIH0KICAgICAgICBhc3NlcnROb3ROdWxsKHIuZ2V0\nUmVhZG1lKCkpOwogICAgICAgIGdldFVzZXIoKS5nZXRSZXBvc2l0b3J5KG5h\nbWUpLmRlbGV0ZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBjbGVhbnVw\nVXNlclJlcG9zaXRvcnkoZmluYWwgU3RyaW5nIG5hbWUpIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKG1vY2tHaXRIdWIuaXNVc2VQcm94eSgp\nKSB7CiAgICAgICAgICAgIGNsZWFudXBSZXBvc2l0b3J5KGdldFVzZXIoZ2l0\nSHViQmVmb3JlQWZ0ZXIpLmdldExvZ2luKCkgKyAiLyIgKyBuYW1lKTsKICAg\nICAgICB9CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RD\ncmVkZW50aWFsVmFsaWQoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIGFzc2VydFRydWUoZ2l0SHViLmlzQ3JlZGVudGlhbFZhbGlkKCkpOwogICAg\nICAgIEdpdEh1YiBjb25uZWN0ID0gR2l0SHViLmNvbm5lY3QoInRvdGFsbHki\nLCAiYm9ndXMiKTsKICAgICAgICBhc3NlcnRGYWxzZShjb25uZWN0LmlzQ3Jl\nZGVudGlhbFZhbGlkKCkpOwogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMg\ndm9pZCB0ZXN0SXNzdWVXaXRoTm9Db21tZW50KCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICBHSFJlcG9zaXRvcnkgcmVwb3NpdG9yeSA9IGdpdEh1\nYi5nZXRSZXBvc2l0b3J5KCJrb2hzdWtlL3Rlc3QiKTsKICAgICAgICBMaXN0\nPEdISXNzdWVDb21tZW50PiB2ID0gcmVwb3NpdG9yeS5nZXRJc3N1ZSg0KS5n\nZXRDb21tZW50cygpOwogICAgICAgIC8vU3lzdGVtLm91dC5wcmludGxuKHYp\nOwogICAgICAgIGFzc2VydFRydWUodi5pc0VtcHR5KCkpOwoKICAgICAgICB2\nID0gcmVwb3NpdG9yeS5nZXRJc3N1ZSgzKS5nZXRDb21tZW50cygpOwogICAg\nICAgIC8vU3lzdGVtLm91dC5wcmludGxuKHYpOwogICAgICAgIGFzc2VydFRy\ndWUodi5zaXplKCkgPT0gMyk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDcmVhdGVJc3N1ZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgR0hVc2VyIHUgPSBnZXRVc2VyKCk7CiAgICAgICAgR0hSZXBv\nc2l0b3J5IHJlcG9zaXRvcnkgPSBnZXRUZXN0UmVwb3NpdG9yeSgpOwogICAg\nICAgIEdITWlsZXN0b25lIG1pbGVzdG9uZSA9IHJlcG9zaXRvcnkuY3JlYXRl\nTWlsZXN0b25lKCJUZXN0IE1pbGVzdG9uZSBUaXRsZTMiLCAiVGVzdCBNaWxl\nc3RvbmUiKTsKICAgICAgICBHSElzc3VlIG8gPSByZXBvc2l0b3J5LmNyZWF0\nZUlzc3VlKCJ0ZXN0aW5nIikKICAgICAgICAgICAgLmJvZHkoInRoaXMgaXMg\nYm9keSIpCiAgICAgICAgICAgIC5hc3NpZ25lZSh1KQogICAgICAgICAgICAu\nbGFiZWwoImJ1ZyIpCiAgICAgICAgICAgIC5sYWJlbCgicXVlc3Rpb24iKQog\nICAgICAgICAgICAubWlsZXN0b25lKG1pbGVzdG9uZSkKICAgICAgICAgICAg\nLmNyZWF0ZSgpOwogICAgICAgIGFzc2VydE5vdE51bGwobyk7CiAgICAgICAg\nby5jbG9zZSgpOwogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0\nZXN0Q3JlYXRlQW5kTGlzdERlcGxveW1lbnRzKCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICBHSFJlcG9zaXRvcnkgcmVwb3NpdG9yeSA9IGdldFRl\nc3RSZXBvc2l0b3J5KCk7CiAgICAgICAgR0hEZXBsb3ltZW50IGRlcGxveW1l\nbnQgPSByZXBvc2l0b3J5LmNyZWF0ZURlcGxveW1lbnQoIm1hc3RlciIpCiAg\nICAgICAgICAgIC5wYXlsb2FkKCJ7XCJ1c2VyXCI6XCJhdG1vc1wiLFwicm9v\nbV9pZFwiOjEyMzQ1Nn0iKQogICAgICAgICAgICAuZGVzY3JpcHRpb24oInF1\nZXN0aW9uIikKICAgICAgICAgICAgLmVudmlyb25tZW50KCJ1bml0dGVzdCIp\nCiAgICAgICAgICAgIC5jcmVhdGUoKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGRlcGxveW1lbnQuZ2V0Q3JlYXRvcigpKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKGRlcGxveW1lbnQuZ2V0SWQoKSk7CiAgICAgICAgTGlzdDxHSERlcGxv\neW1lbnQ+IGRlcGxveW1lbnRzID0gcmVwb3NpdG9yeS5saXN0RGVwbG95bWVu\ndHMobnVsbCwgIm1hc3RlciIsIG51bGwsICJ1bml0dGVzdCIpLmFzTGlzdCgp\nOwogICAgICAgIGFzc2VydE5vdE51bGwoZGVwbG95bWVudHMpOwogICAgICAg\nIGFzc2VydEZhbHNlKEl0ZXJhYmxlcy5pc0VtcHR5KGRlcGxveW1lbnRzKSk7\nCiAgICAgICAgR0hEZXBsb3ltZW50IHVuaXRUZXN0RGVwbG95bWVudCA9IGRl\ncGxveW1lbnRzLmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInVuaXR0\nZXN0IiwgdW5pdFRlc3REZXBsb3ltZW50LmdldEVudmlyb25tZW50KCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygibWFzdGVyIiwgdW5pdFRlc3REZXBsb3lt\nZW50LmdldFJlZigpKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2Nr\naW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0\nRGVwbG95bWVudFN0YXR1c2VzKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAg\nICAgICBHSFJlcG9zaXRvcnkgcmVwb3NpdG9yeSA9IGdldFRlc3RSZXBvc2l0\nb3J5KCk7CiAgICAgICAgR0hEZXBsb3ltZW50IGRlcGxveW1lbnQgPSByZXBv\nc2l0b3J5LmNyZWF0ZURlcGxveW1lbnQoIm1hc3RlciIpCiAgICAgICAgICAg\nIC5kZXNjcmlwdGlvbigicXVlc3Rpb24iKQogICAgICAgICAgICAucGF5bG9h\nZCgie1widXNlclwiOlwiYXRtb3NcIixcInJvb21faWRcIjoxMjM0NTZ9IikK\nICAgICAgICAgICAgLmNyZWF0ZSgpOwogICAgICAgIEdIRGVwbG95bWVudFN0\nYXR1cyBnaERlcGxveW1lbnRTdGF0dXMgPSBkZXBsb3ltZW50LmNyZWF0ZVN0\nYXR1cyhHSERlcGxveW1lbnRTdGF0ZS5TVUNDRVNTKQogICAgICAgICAgICAu\nZGVzY3JpcHRpb24oInN1Y2Nlc3MiKQogICAgICAgICAgICAudGFyZ2V0VXJs\nKCJodHRwOi8vd3d3LmdpdGh1Yi5jb20iKS5jcmVhdGUoKTsKICAgICAgICBJ\ndGVyYWJsZTxHSERlcGxveW1lbnRTdGF0dXM+IGRlcGxveW1lbnRTdGF0dXNl\ncyA9IGRlcGxveW1lbnQubGlzdFN0YXR1c2VzKCk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChkZXBsb3ltZW50U3RhdHVzZXMpOwogICAgICAgIGFzc2VydEVx\ndWFscygxLCBJdGVyYWJsZXMuc2l6ZShkZXBsb3ltZW50U3RhdHVzZXMpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoZ2hEZXBsb3ltZW50U3RhdHVzLmdldElk\nKCksIEl0ZXJhYmxlcy5nZXQoZGVwbG95bWVudFN0YXR1c2VzLCAwKS5nZXRJ\nZCgpKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEdl\ndElzc3VlcygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIExpc3Q8R0hJ\nc3N1ZT4gY2xvc2VkSXNzdWVzID0gZ2l0SHViLmdldE9yZ2FuaXphdGlvbigi\nZ2l0aHViLWFwaSIpLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1hcGkiKS5nZXRJ\nc3N1ZXMoR0hJc3N1ZVN0YXRlLkNMT1NFRCk7CiAgICAgICAgLy8gcHJpb3Ig\ndG8gdXNpbmcgUGFnZWRJdGVyYWJsZSBHSFJlcG9zaXRvcnkuZ2V0SXNzdWVz\nKEdISXNzdWVTdGF0ZSkgd291bGQgb25seSByZXRyaWV2ZSAzMCBpc3N1ZXMK\nICAgICAgICBhc3NlcnRUcnVlKGNsb3NlZElzc3Vlcy5zaXplKCkgPiAxNTAp\nOwogICAgfQoKICAgIHByaXZhdGUgR0hSZXBvc2l0b3J5IGdldFRlc3RSZXBv\nc2l0b3J5KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0VGVtcFJlcG9zaXRvcnkoR0lUSFVCX0FQSV9URVNUX1JFUE8pOwogICAg\nfQoKICAgIEBJZ25vcmUoIk5lZWRzIHRvIGJlIHJld3JpdHRlbiB0byBub3Qg\nY3JlYXRlIG5ldyBpc3N1ZXMganVzdCB0byBjaGVjayB0aGF0IHRoZXkgY2Fu\nIGJlIGZvdW5kLiIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdExp\nc3RJc3N1ZXMoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIEdIVXNl\nciB1ID0gZ2V0VXNlcigpOwogICAgICAgIEdIUmVwb3NpdG9yeSByZXBvc2l0\nb3J5ID0gZ2V0VGVzdFJlcG9zaXRvcnkoKTsKCiAgICAgICAgR0hNaWxlc3Rv\nbmUgbWlsZXN0b25lID0gcmVwb3NpdG9yeS5jcmVhdGVNaWxlc3RvbmUoU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyAiIiwgIlRlc3QgTWlsZXN0b25l\nIik7CiAgICAgICAgbWlsZXN0b25lLmNsb3NlKCk7CiAgICAgICAgR0hJc3N1\nZSB1bmhvbWVkID0gbnVsbDsKICAgICAgICBHSElzc3VlIGhvbWVkID0gbnVs\nbDsKICAgICAgICB0cnkgewogICAgICAgICAgICB1bmhvbWVkID0gcmVwb3Np\ndG9yeS5jcmVhdGVJc3N1ZSgidGVzdGluZyIpLmJvZHkoInRoaXMgaXMgYm9k\neSIpCiAgICAgICAgICAgICAgICAuYXNzaWduZWUodSkKICAgICAgICAgICAg\nICAgIC5sYWJlbCgiYnVnIikKICAgICAgICAgICAgICAgIC5sYWJlbCgicXVl\nc3Rpb24iKQogICAgICAgICAgICAgICAgLmNyZWF0ZSgpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHModW5ob21lZC5nZXROdW1iZXIoKSwgcmVwb3NpdG9y\neS5nZXRJc3N1ZXMoR0hJc3N1ZVN0YXRlLk9QRU4sIG51bGwpLmdldCgwKS5n\nZXROdW1iZXIoKSk7CiAgICAgICAgICAgIGhvbWVkID0gcmVwb3NpdG9yeS5j\ncmVhdGVJc3N1ZSgidGVzdGluZyIpLmJvZHkoInRoaXMgaXMgYm9keSIpCiAg\nICAgICAgICAgICAgICAuYXNzaWduZWUodSkKICAgICAgICAgICAgICAgIC5s\nYWJlbCgiYnVnIikKICAgICAgICAgICAgICAgIC5sYWJlbCgicXVlc3Rpb24i\nKQogICAgICAgICAgICAgICAgLm1pbGVzdG9uZShtaWxlc3RvbmUpCiAgICAg\nICAgICAgICAgICAuY3JlYXRlKCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhob21lZC5nZXROdW1iZXIoKSwgcmVwb3NpdG9yeS5nZXRJc3N1ZXMoR0hJ\nc3N1ZVN0YXRlLk9QRU4sIG1pbGVzdG9uZSkuZ2V0KDApLmdldE51bWJlcigp\nKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAodW5ob21l\nZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB1bmhvbWVkLmNsb3NlKCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhvbWVkICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIGhvbWVkLmNsb3NlKCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lk\nIHRlc3RSYXRlTGltaXQoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIGFzc2VydFRoYXQoZ2l0SHViLmdldFJhdGVMaW1pdCgpLCBub3ROdWxsVmFs\ndWUoKSk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RN\neU9yZ2FuaXphdGlvbnMoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIE1hcDxTdHJpbmcsIEdIT3JnYW5pemF0aW9uPiBvcmcgPSBnaXRIdWIuZ2V0\nTXlPcmdhbml6YXRpb25zKCk7CiAgICAgICAgYXNzZXJ0RmFsc2Uob3JnLmtl\neVNldCgpLmNvbnRhaW5zKG51bGwpKTsKICAgICAgICAvL1N5c3RlbS5vdXQu\ncHJpbnRsbihvcmcpOwogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TXlPcmdhbml6YXRpb25zQ29udGFpbk15VGVhbXMoKSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIE1hcDxTdHJpbmcsIFNldDxHSFRlYW0+\nPiB0ZWFtcyA9IGdpdEh1Yi5nZXRNeVRlYW1zKCk7CiAgICAgICAgTWFwPFN0\ncmluZywgR0hPcmdhbml6YXRpb24+IG15T3JnYW5pemF0aW9ucyA9IGdpdEh1\nYi5nZXRNeU9yZ2FuaXphdGlvbnMoKTsKICAgICAgICAvL0dpdEh1YiBubyBs\nb25nZXIgaGFzIGRlZmF1bHQgJ293bmVycycgdGVhbSwgc28gdGhlcmUgbWF5\nIGJlIG9yZ2FuaXphdGlvbiBtZW1iZXJzaGlwcyB3aXRob3V0IGEgdGVhbQog\nICAgICAgIC8vaHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vYXJ0aWNsZXMvYWJv\ndXQtaW1wcm92ZWQtb3JnYW5pemF0aW9uLXBlcm1pc3Npb25zLwogICAgICAg\nIGFzc2VydFRydWUobXlPcmdhbml6YXRpb25zLmtleVNldCgpLmNvbnRhaW5z\nQWxsKHRlYW1zLmtleVNldCgpKSk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1\nYmxpYyB2b2lkIHRlc3RNeVRlYW1zU2hvdWxkSW5jbHVkZU15c2VsZigpIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgTWFwPFN0cmluZywgU2V0PEdI\nVGVhbT4+IHRlYW1zID0gZ2l0SHViLmdldE15VGVhbXMoKTsKICAgICAgICBm\nb3IgKEVudHJ5PFN0cmluZywgU2V0PEdIVGVhbT4+IHRlYW1zUGVyT3JnIDog\ndGVhbXMuZW50cnlTZXQoKSkgewogICAgICAgICAgICBTdHJpbmcgb3JnYW5p\nemF0aW9uTmFtZSA9IHRlYW1zUGVyT3JnLmdldEtleSgpOwogICAgICAgICAg\nICBmb3IgKEdIVGVhbSB0ZWFtIDogdGVhbXNQZXJPcmcuZ2V0VmFsdWUoKSkg\newogICAgICAgICAgICAgICAgU3RyaW5nIHRlYW1OYW1lID0gdGVhbS5nZXRO\nYW1lKCk7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKCJUZWFtICIgKyB0\nZWFtTmFtZSArICIgaW4gb3JnYW5pemF0aW9uICIgKyBvcmdhbml6YXRpb25O\nYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICsgIiBkb2VzIG5vdCBjb250\nYWluIG15c2VsZiIsCiAgICAgICAgICAgICAgICAgICAgc2hvdWxkQmVsb25n\nVG9UZWFtKG9yZ2FuaXphdGlvbk5hbWUsIHRlYW1OYW1lKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIEBUZXN0CiAgICBwdWJs\naWMgdm9pZCB0ZXN0VXNlclB1YmxpY09yZ2FuaXphdGlvbnNXaGVuVGhlcmVB\ncmVTb21lKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgIAkvLyBrb2hzdWtl\nIGhhZCBzb21lIHB1YmxpYyBvcmcgbWVtYmVyc2hpcHMgYXQgdGhlIHRpbWUg\nV2lyZW1vY2sgcmVjb3JkZWQgdGhlIEdpdEh1YiBBUEkgcmVzcG9uc2VzCiAg\nICAJR0hVc2VyIHVzZXIgPSBuZXcgR0hVc2VyKCk7CiAgICAJdXNlci5sb2dp\nbiA9ICJrb2hzdWtlIjsKICAgIAkKICAgICAgICBNYXA8U3RyaW5nLCBHSE9y\nZ2FuaXphdGlvbj4gb3JncyA9IGdpdEh1Yi5nZXRVc2VyUHVibGljT3JnYW5p\nemF0aW9ucyggdXNlciApOwogICAgICAgIGFzc2VydEZhbHNlKG9yZ3MuaXNF\nbXB0eSgpKTsKICAgIH0KICAgIAogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lk\nIHRlc3RVc2VyUHVibGljT3JnYW5pemF0aW9uc1doZW5UaGVyZUFyZU5vbmUo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgCS8vIGJpdHdpc2VtYW4gaGFk\nIG5vIHB1YmxpYyBvcmcgbWVtYmVyc2hpcHMgYXQgdGhlIHRpbWUgV2lyZW1v\nY2sgcmVjb3JkZWQgdGhlIEdpdEh1YiBBUEkgcmVzcG9uc2VzCiAgICAJR0hV\nc2VyIHVzZXIgPSBuZXcgR0hVc2VyKCk7CiAgICAJdXNlci5sb2dpbiA9ICJi\naXR3aXNlbWFuIjsKICAgIAkKICAgICAgICBNYXA8U3RyaW5nLCBHSE9yZ2Fu\naXphdGlvbj4gb3JncyA9IGdpdEh1Yi5nZXRVc2VyUHVibGljT3JnYW5pemF0\naW9ucyggdXNlciApOwogICAgICAgIGFzc2VydFRydWUob3Jncy5pc0VtcHR5\nKCkpOwogICAgfQoKICAgIHByaXZhdGUgYm9vbGVhbiBzaG91bGRCZWxvbmdU\nb1RlYW0oU3RyaW5nIG9yZ2FuaXphdGlvbk5hbWUsIFN0cmluZyB0ZWFtTmFt\nZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBHSE9yZ2FuaXphdGlv\nbiBvcmcgPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbk5h\nbWUpOwogICAgICAgIGFzc2VydE5vdE51bGwob3JnKTsKICAgICAgICBHSFRl\nYW0gdGVhbSA9IG9yZy5nZXRUZWFtQnlOYW1lKHRlYW1OYW1lKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKHRlYW0pOwogICAgICAgIHJldHVybiB0ZWFtLmhh\nc01lbWJlcihnaXRIdWIuZ2V0TXlzZWxmKCkpOwogICAgfQoKICAgIEBJZ25v\ncmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RTaG91bGRGZXRjaFRlYW0oKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBHSE9yZ2FuaXphdGlvbiBqID0gZ2l0SHViLmdldE9yZ2Fu\naXphdGlvbihHSVRIVUJfQVBJX1RFU1RfT1JHKTsKICAgICAgICBHSFRlYW0g\ndGVhbUJ5TmFtZSA9IGouZ2V0VGVhbXMoKS5nZXQoIkNvcmUgRGV2ZWxvcGVy\ncyIpOwoKICAgICAgICBHSFRlYW0gdGVhbUJ5SWQgPSBnaXRIdWIuZ2V0VGVh\nbSh0ZWFtQnlOYW1lLmdldElkKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwo\ndGVhbUJ5SWQpOwoKICAgICAgICBhc3NlcnRFcXVhbHModGVhbUJ5TmFtZSwg\ndGVhbUJ5SWQpOwogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcg\nY2hlY2siKQogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFB1\nbGxSZXF1ZXN0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgR0hSZXBv\nc2l0b3J5IHIgPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9uKCJqZW5raW5zY2ki\nKS5nZXRSZXBvc2l0b3J5KCJqZW5raW5zIik7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJtYXN0ZXIiLCByLmdldE1hc3RlckJyYW5jaCgpKTsKICAgICAgICBy\nLmdldFB1bGxSZXF1ZXN0KDEpOwogICAgICAgIHIuZ2V0UHVsbFJlcXVlc3Rz\nKEdISXNzdWVTdGF0ZS5PUEVOKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVk\ncyBtb2NraW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0\nZXN0RmV0Y2hQdWxsUmVxdWVzdEFzTGlzdCgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIEdIUmVwb3NpdG9yeSByID0gZ2l0SHViLmdldFJlcG9zaXRv\ncnkoImdpdGh1Yi1hcGkvZ2l0aHViLWFwaSIpOwogICAgICAgIGFzc2VydEVx\ndWFscygibWFzdGVyIiwgci5nZXRNYXN0ZXJCcmFuY2goKSk7CiAgICAgICAg\nUGFnZWRJdGVyYWJsZTxHSFB1bGxSZXF1ZXN0PiBpID0gci5saXN0UHVsbFJl\ncXVlc3RzKEdISXNzdWVTdGF0ZS5DTE9TRUQpOwogICAgICAgIExpc3Q8R0hQ\ndWxsUmVxdWVzdD4gcHJzID0gaS5hc0xpc3QoKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKHBycyk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwcnMuc2l6ZSgpID4g\nMCk7CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIp\nCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFJlcG9QZXJtaXNzaW9u\ncygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGtvaHN1a2UoKTsKCiAg\nICAgICAgR0hSZXBvc2l0b3J5IHIgPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9u\nKEdJVEhVQl9BUElfVEVTVF9PUkcpLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1h\ncGkiKTsKICAgICAgICBhc3NlcnRUcnVlKHIuaGFzUHVsbEFjY2VzcygpKTsK\nCiAgICAgICAgciA9IGdpdEh1Yi5nZXRPcmdhbml6YXRpb24oImdpdGh1YiIp\nLmdldFJlcG9zaXRvcnkoImh1YiIpOwogICAgICAgIGFzc2VydEZhbHNlKHIu\naGFzQWRtaW5BY2Nlc3MoKSk7CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMg\nbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVz\ndEdldE15c2VsZigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEdITXlz\nZWxmIG1lID0gZ2l0SHViLmdldE15c2VsZigpOwogICAgICAgIGFzc2VydE5v\ndE51bGwobWUpOwogICAgICAgIGFzc2VydE5vdE51bGwoZ2l0SHViLmdldFVz\nZXIoImtvaHN1a2UyIikpOwogICAgICAgIFBhZ2VkSXRlcmFibGU8R0hSZXBv\nc2l0b3J5PiBnaFJlcG9zaXRvcmllcyA9IG1lLmxpc3RSZXBvc2l0b3JpZXMo\nKTsKICAgICAgICBhc3NlcnRUcnVlKGdoUmVwb3NpdG9yaWVzLml0ZXJhdG9y\nKCkuaGFzTmV4dCgpKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2Nr\naW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0UHVi\nbGljS2V5cygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIExpc3Q8R0hL\nZXk+IGtleXMgPSBnaXRIdWIuZ2V0TXlzZWxmKCkuZ2V0UHVibGljS2V5cygp\nOwogICAgICAgIGFzc2VydEZhbHNlKGtleXMuaXNFbXB0eSgpKTsKICAgIH0K\nCiAgICBASWdub3JlKCJOZWVkcyBtb2NraW5nIGNoZWNrIikKICAgIEBUZXN0\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0T3JnRm9yaygpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGtvaHN1a2UoKTsKCiAgICAgICAgZ2l0SHViLmdldFJl\ncG9zaXRvcnkoImtvaHN1a2UvcnVieXdtIikuZm9ya1RvKGdpdEh1Yi5nZXRP\ncmdhbml6YXRpb24oR0lUSFVCX0FQSV9URVNUX09SRykpOwogICAgfQoKICAg\nIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAg\nIHB1YmxpYyB2b2lkIHRlc3RHZXRUZWFtc0ZvclJlcG8oKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBrb2hzdWtlKCk7CiAgICAgICAgLy8gJ0NvcmUg\nRGV2ZWxvcGVycycgYW5kICdPd25lcnMnCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIGdpdEh1Yi5nZXRPcmdhbml6YXRpb24oR0lUSFVCX0FQSV9URVNUX09S\nRykuZ2V0UmVwb3NpdG9yeSgidGVzdEdldFRlYW1zRm9yUmVwbyIpLmdldFRl\nYW1zKCkuc2l6ZSgpKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2Nr\naW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0TWVt\nYmVyc2hpcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFNldDxTdHJp\nbmc+IG1lbWJlcnMgPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9uKEdJVEhVQl9B\nUElfVEVTVF9PUkcpLmdldFJlcG9zaXRvcnkoImplbmtpbnMiKS5nZXRDb2xs\nYWJvcmF0b3JOYW1lcygpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbiht\nZW1iZXJzLmNvbnRhaW5zKCJrb2hzdWtlIikpOwogICAgfQoKICAgIEBJZ25v\ncmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNZW1iZXJPcmdzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgSGFzaFNldDxHSE9yZ2FuaXphdGlvbj4gbyA9IGdpdEh1Yi5nZXRV\nc2VyKCJrb2hzdWtlIikuZ2V0T3JnYW5pemF0aW9ucygpOwogICAgICAgIGFz\nc2VydFRoYXQobywgaGFzSXRlbShoYXNQcm9wZXJ0eSgibmFtZSIsIGVxdWFs\nVG8oIkNsb3VkQmVlcyIpKSkpOwogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRz\nIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRl\nc3RPcmdUZWFtcygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGtvaHN1\na2UoKTsKICAgICAgICBpbnQgc3ogPSAwOwogICAgICAgIGZvciAoR0hUZWFt\nIHQgOiBnaXRIdWIuZ2V0T3JnYW5pemF0aW9uKEdJVEhVQl9BUElfVEVTVF9P\nUkcpLmxpc3RUZWFtcygpKSB7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwo\ndC5nZXROYW1lKCkpOwogICAgICAgICAgICBzeisrOwogICAgICAgIH0KICAg\nICAgICBhc3NlcnRUcnVlKHN6IDwgMTAwKTsKICAgIH0KCiAgICBASWdub3Jl\nKCJOZWVkcyBtb2NraW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMg\ndm9pZCB0ZXN0T3JnVGVhbUJ5TmFtZSgpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIGtvaHN1a2UoKTsKICAgICAgICBHSFRlYW0gZSA9IGdpdEh1Yi5n\nZXRPcmdhbml6YXRpb24oR0lUSFVCX0FQSV9URVNUX09SRykuZ2V0VGVhbUJ5\nTmFtZSgiQ29yZSBEZXZlbG9wZXJzIik7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChlKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2NraW5nIGNoZWNr\nIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0T3JnVGVhbUJ5U2x1\nZygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGtvaHN1a2UoKTsKICAg\nICAgICBHSFRlYW0gZSA9IGdpdEh1Yi5nZXRPcmdhbml6YXRpb24oR0lUSFVC\nX0FQSV9URVNUX09SRykuZ2V0VGVhbUJ5U2x1ZygiY29yZS1kZXZlbG9wZXJz\nIik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlKTsKICAgIH0KCiAgICBASWdu\nb3JlKCJOZWVkcyBtb2NraW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJs\naWMgdm9pZCB0ZXN0Q29tbWl0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgR0hDb21taXQgY29tbWl0ID0gZ2l0SHViLmdldFVzZXIoImplbmtpbnNj\naSIpLmdldFJlcG9zaXRvcnkoImplbmtpbnMiKS5nZXRDb21taXQoIjA4YzFj\nOTk3MGFmNGQ2MDlhZTc1NGZiZTgwM2UwNjE4NmUzMjA2ZjciKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgY29tbWl0LmdldFBhcmVudHMoKS5zaXplKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscygxLCBjb21taXQuZ2V0RmlsZXMoKS5z\naXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiaHR0cHM6Ly9naXRodWIu\nY29tL2plbmtpbnNjaS9qZW5raW5zL2NvbW1pdC8wOGMxYzk5NzBhZjRkNjA5\nYWU3NTRmYmU4MDNlMDYxODZlMzIwNmY3IiwKICAgICAgICAgICAgY29tbWl0\nLmdldEh0bWxVcmwoKS50b1N0cmluZygpKTsKCiAgICAgICAgRmlsZSBmID0g\nY29tbWl0LmdldEZpbGVzKCkuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFs\ncyg0OCwgZi5nZXRMaW5lc0NoYW5nZWQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJtb2RpZmllZCIsIGYuZ2V0U3RhdHVzKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiY2hhbmdlbG9nLmh0bWwiLCBmLmdldEZpbGVOYW1lKCkpOwoK\nICAgICAgICAvLyB3YWxrIHRoZSB0cmVlCiAgICAgICAgR0hUcmVlIHQgPSBj\nb21taXQuZ2V0VHJlZSgpOwogICAgICAgIGFzc2VydFRoYXQoSU9VdGlscy50\nb1N0cmluZyh0LmdldEVudHJ5KCJ0b2RvLnR4dCIpLnJlYWRBc0Jsb2IoKSks\nIGNvbnRhaW5zU3RyaW5nKCJleGVjdXRvciByZW5kZXJpbmciKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbCh0LmdldEVudHJ5KCJ3YXIiKS5hc1RyZWUoKSk7\nCiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAg\nICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdExpc3RDb21taXRzKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgTGlzdDxTdHJpbmc+IHNoYTEgPSBu\nZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKICAgICAgICBmb3IgKEdIQ29tbWl0\nIGMgOiBnaXRIdWIuZ2V0VXNlcigia29oc3VrZSIpLmdldFJlcG9zaXRvcnko\nImVtcHR5LWNvbW1pdCIpLmxpc3RDb21taXRzKCkpIHsKICAgICAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKGMuZ2V0U0hBMSgpKTsKICAgICAgICAgICAg\nc2hhMS5hZGQoYy5nZXRTSEExKCkpOwogICAgICAgIH0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoImZkZmFkNmJlNGRiNmY5NmZhZWExZjE1M2ZiNDQ3YjQ3OWE3\nYTljYjciLCBzaGExLmdldCgwKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIHNoYTEuc2l6ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVl\ncnlDb21taXRzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgTGlzdDxT\ndHJpbmc+IHNoYTEgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKICAgICAg\nICBmb3IgKEdIQ29tbWl0IGMgOiBnaXRIdWIuZ2V0VXNlcigiamVua2luc2Np\nIikuZ2V0UmVwb3NpdG9yeSgiamVua2lucyIpLnF1ZXJ5Q29tbWl0cygpCiAg\nICAgICAgICAgIC5zaW5jZShuZXcgRGF0ZSgxMTk5MTc0NDAwMDAwTCkpLnVu\ndGlsKDEyMDE4NTI4MDAwMDBMKS5wYXRoKCJwb20ueG1sIikubGlzdCgpKSB7\nCiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihjLmdldFNIQTEoKSk7\nCiAgICAgICAgICAgIHNoYTEuYWRkKGMuZ2V0U0hBMSgpKTsKICAgICAgICB9\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxY2NjZGRiMjJlMzA1Mzk3MTUxYjJi\nN2I4N2I0YjQ3ZDc0Y2EzMzdiIiwgc2hhMS5nZXQoMCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygyOSwgc2hhMS5zaXplKCkpOwogICAgfQoKICAgIEBJZ25v\ncmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RCcmFuY2hlcygpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIE1hcDxTdHJpbmcsIEdIQnJhbmNoPiBiID0KICAgICAgICAgICAgZ2l0\nSHViLmdldFVzZXIoImplbmtpbnNjaSIpLmdldFJlcG9zaXRvcnkoImplbmtp\nbnMiKS5nZXRCcmFuY2hlcygpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRs\nbihiKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2NraW5nIGNoZWNr\nIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29tbWl0Q29tbWVu\ndCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEdIUmVwb3NpdG9yeSBy\nID0gZ2l0SHViLmdldFVzZXIoImplbmtpbnNjaSIpLmdldFJlcG9zaXRvcnko\nImplbmtpbnMiKTsKICAgICAgICBQYWdlZEl0ZXJhYmxlPEdIQ29tbWl0Q29t\nbWVudD4gY29tbWVudHMgPSByLmxpc3RDb21taXRDb21tZW50cygpOwogICAg\nICAgIExpc3Q8R0hDb21taXRDb21tZW50PiBiYXRjaCA9IGNvbW1lbnRzLml0\nZXJhdG9yKCkubmV4dFBhZ2UoKTsKICAgICAgICBmb3IgKEdIQ29tbWl0Q29t\nbWVudCBjb21tZW50IDogYmF0Y2gpIHsKICAgICAgICAgICAgU3lzdGVtLm91\ndC5wcmludGxuKGNvbW1lbnQuZ2V0Qm9keSgpKTsKICAgICAgICAgICAgYXNz\nZXJ0U2FtZShjb21tZW50LmdldE93bmVyKCksIHIpOwogICAgICAgIH0KICAg\nIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2NraW5nIGNoZWNrIikKICAgIEBU\nZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3JlYXRlQ29tbWl0Q29tbWVudCgp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEdIQ29tbWl0IGNvbW1pdCA9\nIGdpdEh1Yi5nZXRVc2VyKCJrb2hzdWtlIikuZ2V0UmVwb3NpdG9yeSgic2Fu\nZGJveC1hbnQiKS5nZXRDb21taXQoIjhhZTM4ZGIwZWE1ODM3MzEzYWI1ZjM5\nZDQzYTZmNzNkZTNiZDkwMDAiKTsKICAgICAgICBHSENvbW1pdENvbW1lbnQg\nYyA9IGNvbW1pdC5jcmVhdGVDb21tZW50KCJbdGVzdGluZ10oaHR0cDovL2tv\naHN1c2Uub3JnLykiKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oYyk7\nCiAgICAgICAgYy51cGRhdGUoInVwZGF0ZWQgdGV4dCIpOwogICAgICAgIFN5\nc3RlbS5vdXQucHJpbnRsbihjKTsKICAgICAgICBjLmRlbGV0ZSgpOwogICAg\nfQoKICAgIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRl\nc3QKICAgIHB1YmxpYyB2b2lkIHRyeUhvb2soKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBrb2hzdWtlKCk7CiAgICAgICAgR0hSZXBvc2l0b3J5IHIg\nPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9uKEdJVEhVQl9BUElfVEVTVF9PUkcp\nLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1hcGkiKTsKICAgICAgICBHSEhvb2sg\naG9vayA9IHIuY3JlYXRlV2ViSG9vayhuZXcgVVJMKCJodHRwOi8vd3d3Lmdv\nb2dsZS5jb20vIikpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihob29r\nKTsKCiAgICAgICAgaWYgKG1vY2tHaXRIdWIuaXNVc2VQcm94eSgpKSB7CiAg\nICAgICAgICAgIHIgPSBnaXRIdWJCZWZvcmVBZnRlci5nZXRPcmdhbml6YXRp\nb24oR0lUSFVCX0FQSV9URVNUX09SRykuZ2V0UmVwb3NpdG9yeSgiZ2l0aHVi\nLWFwaSIpOwogICAgICAgICAgICBmb3IgKEdISG9vayBoIDogci5nZXRIb29r\ncygpKSB7CiAgICAgICAgICAgICAgICBoLmRlbGV0ZSgpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RXZlbnRBcGkoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBm\nb3IgKEdIRXZlbnRJbmZvIGV2IDogZ2l0SHViLmdldEV2ZW50cygpKSB7CiAg\nICAgICAgICAgIGlmIChldi5nZXRUeXBlKCkgPT0gR0hFdmVudC5QVUxMX1JF\nUVVFU1QpIHsKICAgICAgICAgICAgICAgIEdIRXZlbnRQYXlsb2FkLlB1bGxS\nZXF1ZXN0IHByID0gZXYuZ2V0UGF5bG9hZChHSEV2ZW50UGF5bG9hZC5QdWxs\nUmVxdWVzdC5jbGFzcyk7CiAgICAgICAgICAgICAgICBhc3NlcnRUaGF0KHBy\nLmdldE51bWJlcigpLCBpcyhwci5nZXRQdWxsUmVxdWVzdCgpLmdldE51bWJl\ncigpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgQEln\nbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVi\nbGljIHZvaWQgdGVzdEFwcCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKGdpdEh1Yi5nZXRNeXNlbGYoKS5nZXRF\nbWFpbHMoKSk7CgovLyAgICAgICAgR0hSZXBvc2l0b3J5IHIgPSBnaXRIdWIu\nZ2V0T3JnYW5pemF0aW9uKCJqZW5raW5zY2kiKS5jcmVhdGVSZXBvc2l0b3J5\nKCJra3Rlc3Q0IiwgIktvaHN1a2UncyB0ZXN0IiwgImh0dHA6Ly9rb2hzdWtl\nLm9yZy8iLCAiRXZlcnlvbmUiLCB0cnVlKTsKLy8gICAgICAgIHIuZm9yaygp\nOwoKLy8gICAgICAgIHRyeURpc2FibGluZ0lzc3VlVHJhY2tlcnMoZ2l0SHVi\nKTsKCi8vICAgICAgICB0cnlEaXNhYmxpbmdXaWtpKGdpdEh1Yik7CgovLyAg\nICAgICAgR0hQdWxsUmVxdWVzdCBpID0gZ2l0SHViLmdldE9yZ2FuaXphdGlv\nbigiamVua2luc2NpIikuZ2V0UmVwb3NpdG9yeSgic2FuZGJveCIpLmdldFB1\nbGxSZXF1ZXN0KDEpOwovLyAgICAgICAgZm9yIChHSElzc3VlQ29tbWVudCBj\nIDogaS5nZXRDb21tZW50cygpKQovLyAgICAgICAgICAgIFN5c3RlbS5vdXQu\ncHJpbnRsbihjKTsKLy8gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihpKTsK\nCi8vICAgICAgICBnaXRIdWIuZ2V0TXlzZWxmKCkuZ2V0UmVwb3NpdG9yeSgi\ncGVyZm9yY2UtcGx1Z2luIikuc2V0RW1haWxTZXJ2aWNlSG9vaygia2tAa29o\nc3VrZS5vcmciKTsKCi8vICAgICAgICB0cnlSZW5hbWluZyhnaXRIdWIpOwov\nLyAgICAgICAgdHJ5T3JnRm9yayhnaXRIdWIpOwoKLy8gICAgICAgIHRlc3RP\ncmdhbml6YXRpb24oZ2l0SHViKTsKLy8gICAgICAgIHRlc3RQb3N0Q29tbWl0\nSG9vayhnaXRIdWIpOwoKLy8gICAgICAgIHRyeVRlYW1DcmVhdGlvbihnaXRI\ndWIpOwoKLy8gICAgICAgIHQuYWRkKGdpdEh1Yi5nZXRNeXNlbGYoKSk7Ci8v\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4odC5nZXRNZW1iZXJzKCkpOwov\nLyAgICAgICAgdC5yZW1vdmUoZ2l0SHViLmdldE15c2VsZigpKTsKLy8gICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbih0LmdldE1lbWJlcnMoKSk7CgovLyAg\nICAgICAgR0hSZXBvc2l0b3J5IHIgPSBnaXRIdWIuZ2V0T3JnYW5pemF0aW9u\nKCJIdWRzb25MYWJzIikuY3JlYXRlUmVwb3NpdG9yeSgiYXV0by10ZXN0Iiwg\nInNvbWUgZGVzY3JpcHRpb24iLCAiaHR0cDovL2tvaHN1a2Uub3JnLyIsICJQ\nbHVnaW4gRGV2ZWxvcGVycyIsIHRydWUpOwoKLy8gICAgICAgIHIuCi8vICAg\nICAgICBHaXRIdWIgaHViID0gR2l0SHViLmNvbm5lY3RBbm9ueW1vdXNseSgp\nOwovLy8vICAgICAgICBodWIuY3JlYXRlUmVwb3NpdG9yeSgidGVzdCIsInRl\nc3QgcmVwb3NpdG9yeSIsbnVsbCx0cnVlKTsKLy8vLyAgICAgICAgaHViLmdl\ndFVzZXJUZXN0KCJrb2hzdWtlIikuZ2V0UmVwb3NpdG9yeSgidGVzdCIpLmRl\nbGV0ZSgpOwovLwovLyAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGh1Yi5n\nZXRVc2VyVGVzdCgia29oc3VrZSIpLmdldFJlcG9zaXRvcnkoImh1ZHNvbiIp\nLmdldENvbGxhYm9yYXRvcnMoKSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIHRyeURpc2FibGluZ0lzc3VlVHJhY2tlcnMoR2l0SHViIGdpdEh1YikgdGhy\nb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKEdIUmVwb3NpdG9yeSBy\nIDogZ2l0SHViLmdldE9yZ2FuaXphdGlvbigiamVua2luc2NpIikuZ2V0UmVw\nb3NpdG9yaWVzKCkudmFsdWVzKCkpIHsKICAgICAgICAgICAgaWYgKHIuaGFz\nSXNzdWVzKCkpIHsKICAgICAgICAgICAgICAgIGlmIChyLmdldE9wZW5Jc3N1\nZUNvdW50KCkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5v\ndXQucHJpbnRsbigiRElTQUJMRUQgICIgKyByLmdldE5hbWUoKSk7CiAgICAg\nICAgICAgICAgICAgICAgci5lbmFibGVJc3N1ZVRyYWNrZXIoZmFsc2UpOwog\nICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oIlVOVE9VQ0hFRCAiICsgci5nZXROYW1lKCkp\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCB0cnlEaXNhYmxpbmdXaWtpKEdpdEh1\nYiBnaXRIdWIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgZm9yIChH\nSFJlcG9zaXRvcnkgciA6IGdpdEh1Yi5nZXRPcmdhbml6YXRpb24oImplbmtp\nbnNjaSIpLmdldFJlcG9zaXRvcmllcygpLnZhbHVlcygpKSB7CiAgICAgICAg\nICAgIGlmIChyLmhhc1dpa2koKSkgewogICAgICAgICAgICAgICAgU3lzdGVt\nLm91dC5wcmludGxuKCJESVNBQkxFRCAgIiArIHIuZ2V0TmFtZSgpKTsKICAg\nICAgICAgICAgICAgIHIuZW5hYmxlV2lraShmYWxzZSk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHRyeVVwZGF0\naW5nSXNzdWVUcmFja2VyKEdpdEh1YiBnaXRIdWIpIHRocm93cyBJT0V4Y2Vw\ndGlvbiB7CiAgICAgICAgR0hSZXBvc2l0b3J5IHIgPSBnaXRIdWIuZ2V0T3Jn\nYW5pemF0aW9uKCJqZW5raW5zY2kiKS5nZXRSZXBvc2l0b3J5KCJsaWItdGFz\nay1yZWFjdG9yIik7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKHIuaGFz\nSXNzdWVzKCkpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihyLmdldE9w\nZW5Jc3N1ZUNvdW50KCkpOwogICAgICAgIHIuZW5hYmxlSXNzdWVUcmFja2Vy\nKGZhbHNlKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdHJ5UmVuYW1pbmco\nR2l0SHViIGdpdEh1YikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBn\naXRIdWIuZ2V0VXNlcigia29oc3VrZSIpLmdldFJlcG9zaXRvcnkoInRlc3Qi\nKS5yZW5hbWVUbygidGVzdDIiKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\ndHJ5VGVhbUNyZWF0aW9uKEdpdEh1YiBnaXRIdWIpIHRocm93cyBJT0V4Y2Vw\ndGlvbiB7CiAgICAgICAgR0hPcmdhbml6YXRpb24gbyA9IGdpdEh1Yi5nZXRP\ncmdhbml6YXRpb24oIkh1ZHNvbkxhYnMiKTsKICAgICAgICBHSFRlYW0gdCA9\nIG8uY3JlYXRlVGVhbSgiYXV0byB0ZWFtIiwgUGVybWlzc2lvbi5QVVNIKTsK\nICAgICAgICB0LmFkZChvLmdldFJlcG9zaXRvcnkoImF1dG8tdGVzdCIpKTsK\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdGVzdFBvc3RDb21taXRIb29rKEdp\ndEh1YiBnaXRIdWIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgR0hS\nZXBvc2l0b3J5IHIgPSBnaXRIdWIuZ2V0TXlzZWxmKCkuZ2V0UmVwb3NpdG9y\neSgiZm9vIik7CiAgICAgICAgU2V0PFVSTD4gaG9va3MgPSByLmdldFBvc3RD\nb21taXRIb29rcygpOwogICAgICAgIGhvb2tzLmFkZChuZXcgVVJMKCJodHRw\nOi8va29oc3VrZS5vcmcvdGVzdCIpKTsKICAgICAgICBTeXN0ZW0ub3V0LnBy\naW50bG4oaG9va3MpOwogICAgICAgIGhvb2tzLnJlbW92ZShuZXcgVVJMKCJo\ndHRwOi8va29oc3VrZS5vcmcvdGVzdCIpKTsKICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oaG9va3MpOwogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRzIG1v\nY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RP\ncmdSZXBvc2l0b3JpZXMoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIGtvaHN1a2UoKTsKICAgICAgICBHSE9yZ2FuaXphdGlvbiBqID0gZ2l0SHVi\nLmdldE9yZ2FuaXphdGlvbigiamVua2luc2NpIik7CiAgICAgICAgbG9uZyBz\ndGFydCA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgICAgIE1h\ncDxTdHJpbmcsIEdIUmVwb3NpdG9yeT4gcmVwb3MgPSBqLmdldFJlcG9zaXRv\ncmllcygpOwogICAgICAgIGxvbmcgZW5kID0gU3lzdGVtLmN1cnJlbnRUaW1l\nTWlsbGlzKCk7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGYoIiVkIHJlcG9z\naXRvcmllcyBpbiAlZG1zXG4iLCByZXBvcy5zaXplKCksIGVuZCAtIHN0YXJ0\nKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2NraW5nIGNoZWNrIikK\nICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0T3JnYW5pemF0aW9uKCkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBrb2hzdWtlKCk7CiAgICAg\nICAgR0hPcmdhbml6YXRpb24gaiA9IGdpdEh1Yi5nZXRPcmdhbml6YXRpb24o\nR0lUSFVCX0FQSV9URVNUX09SRyk7CiAgICAgICAgR0hUZWFtIHQgPSBqLmdl\ndFRlYW1zKCkuZ2V0KCJDb3JlIERldmVsb3BlcnMiKTsKCiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChqLmdldFJlcG9zaXRvcnkoImplbmtpbnMiKSk7CgovLyAg\nICAgICAgdC5hZGQobGFicy5nZXRSZXBvc2l0b3J5KCJ4eXoiKSk7CiAgICB9\nCgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVz\ndAogICAgcHVibGljIHZvaWQgdGVzdENvbW1pdFN0YXR1cygpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIEdIUmVwb3NpdG9yeSByID0gZ2l0SHViLmdl\ndFJlcG9zaXRvcnkoImdpdGh1Yi1hcGkvZ2l0aHViLWFwaSIpOwoKICAgICAg\nICBHSENvbW1pdFN0YXR1cyBzdGF0ZTsKCi8vICAgICAgICBzdGF0ZSA9IHIu\nY3JlYXRlQ29tbWl0U3RhdHVzKCJlY2JmZGQ3MzE1ZWYyY2YwNGIyYmU3ZjEx\nYTA3MmNlMGJkMDBjMzk2IiwgR0hDb21taXRTdGF0ZS5GQUlMVVJFLCAiaHR0\ncDovL2tvaHN1a2Uub3JnLyIsICJ0ZXN0aW5nISIpOwoKICAgICAgICBMaXN0\nPEdIQ29tbWl0U3RhdHVzPiBsc3QgPSByLmxpc3RDb21taXRTdGF0dXNlcygi\nZWNiZmRkNzMxNWVmMmNmMDRiMmJlN2YxMWEwNzJjZTBiZDAwYzM5NiIpLmFz\nTGlzdCgpOwogICAgICAgIHN0YXRlID0gbHN0LmdldCgwKTsKICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oc3RhdGUpOwogICAgICAgIGFzc2VydEVxdWFs\ncygidGVzdGluZyEiLCBzdGF0ZS5nZXREZXNjcmlwdGlvbigpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoImh0dHA6Ly9rb2hzdWtlLm9yZy8iLCBzdGF0ZS5n\nZXRUYXJnZXRVcmwoKSk7CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMgbW9j\na2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdENv\nbW1pdFNob3J0SW5mbygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEdI\nUmVwb3NpdG9yeSByID0gZ2l0SHViLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1h\ncGkvZ2l0aHViLWFwaSIpOwogICAgICAgIEdIQ29tbWl0IGNvbW1pdCA9IHIu\nZ2V0Q29tbWl0KCI4NmEyZTI0NWFhNmQ3MWQ1NDkyMzY1NTA2NjA0OWQ5ZTIx\nYTE1ZjIzIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGNvbW1pdC5nZXRDb21t\naXRTaG9ydEluZm8oKS5nZXRBdXRob3IoKS5nZXROYW1lKCksICJLb2hzdWtl\nIEthd2FndWNoaSIpOwogICAgICAgIGFzc2VydEVxdWFscyhjb21taXQuZ2V0\nQ29tbWl0U2hvcnRJbmZvKCkuZ2V0TWVzc2FnZSgpLCAiZG9jIik7CiAgICB9\nCgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVz\ndAogICAgcHVibGljIHZvaWQgdGVzdFB1bGxSZXF1ZXN0UG9wdWxhdGUoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBHSFJlcG9zaXRvcnkgciA9IGdp\ndEh1Yi5nZXRVc2VyKCJrb2hzdWtlIikuZ2V0UmVwb3NpdG9yeSgiZ2l0aHVi\nLWFwaSIpOwogICAgICAgIEdIUHVsbFJlcXVlc3QgcCA9IHIuZ2V0UHVsbFJl\ncXVlc3QoMTcpOwogICAgICAgIEdIVXNlciB1ID0gcC5nZXRVc2VyKCk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbCh1LmdldE5hbWUoKSk7CiAgICB9CgogICAg\nQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAg\ncHVibGljIHZvaWQgdGVzdENoZWNrTWVtYmVyc2hpcCgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGtvaHN1a2UoKTsKICAgICAgICBHSE9yZ2FuaXph\ndGlvbiBqID0gZ2l0SHViLmdldE9yZ2FuaXphdGlvbigiamVua2luc2NpIik7\nCiAgICAgICAgR0hVc2VyIGtvaHN1a2UgPSBnaXRIdWIuZ2V0VXNlcigia29o\nc3VrZSIpOwogICAgICAgIEdIVXNlciBiID0gZ2l0SHViLmdldFVzZXIoImIi\nKTsKCiAgICAgICAgYXNzZXJ0VHJ1ZShqLmhhc01lbWJlcihrb2hzdWtlKSk7\nCiAgICAgICAgYXNzZXJ0RmFsc2Uoai5oYXNNZW1iZXIoYikpOwoKICAgICAg\nICBhc3NlcnRUcnVlKGouaGFzUHVibGljTWVtYmVyKGtvaHN1a2UpKTsKICAg\nICAgICBhc3NlcnRGYWxzZShqLmhhc1B1YmxpY01lbWJlcihiKSk7CiAgICB9\nCgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVz\ndAogICAgcHVibGljIHZvaWQgdGVzdENyZWF0ZVJlbGVhc2UoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBrb2hzdWtlKCk7CgogICAgICAgIEdIUmVw\nb3NpdG9yeSByID0gZ2l0SHViLmdldFJlcG9zaXRvcnkoImtvaHN1a2UyL3Rl\nc3RDcmVhdGVSZWxlYXNlIik7CgogICAgICAgIFN0cmluZyB0YWdOYW1lID0g\nVVVJRC5yYW5kb21VVUlEKCkudG9TdHJpbmcoKTsKICAgICAgICBTdHJpbmcg\ncmVsZWFzZU5hbWUgPSAicmVsZWFzZS0iICsgdGFnTmFtZTsKCiAgICAgICAg\nR0hSZWxlYXNlIHJlbCA9IHIuY3JlYXRlUmVsZWFzZSh0YWdOYW1lKQogICAg\nICAgICAgICAubmFtZShyZWxlYXNlTmFtZSkKICAgICAgICAgICAgLnByZXJl\nbGVhc2UoZmFsc2UpCiAgICAgICAgICAgIC5jcmVhdGUoKTsKCiAgICAgICAg\nVGhyZWFkLnNsZWVwKDMwMDApOwoKICAgICAgICB0cnkgewoKICAgICAgICAg\nICAgZm9yIChHSFRhZyB0YWcgOiByLmxpc3RUYWdzKCkpIHsKICAgICAgICAg\nICAgICAgIGlmICh0YWdOYW1lLmVxdWFscyh0YWcuZ2V0TmFtZSgpKSkgewog\nICAgICAgICAgICAgICAgICAgIFN0cmluZyBhc2ggPSB0YWcuZ2V0Q29tbWl0\nKCkuZ2V0U0hBMSgpOwogICAgICAgICAgICAgICAgICAgIEdIUmVmIHJlZiA9\nIHIuY3JlYXRlUmVmKCJyZWZzL2hlYWRzLyIgKyByZWxlYXNlTmFtZSwgYXNo\nKTsKICAgICAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMocmVmLmdldFJl\nZigpLCAicmVmcy9oZWFkcy8iICsgcmVsZWFzZU5hbWUpOwoKICAgICAgICAg\nICAgICAgICAgICBmb3IgKE1hcC5FbnRyeTxTdHJpbmcsIEdIQnJhbmNoPiBl\nbnRyeSA6IHIuZ2V0QnJhbmNoZXMoKS5lbnRyeVNldCgpKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihlbnRyeS5nZXRL\nZXkoKSArICIvIiArIGVudHJ5LmdldFZhbHVlKCkpOwogICAgICAgICAgICAg\nICAgICAgICAgICBpZiAocmVsZWFzZU5hbWUuZXF1YWxzKGVudHJ5LmdldFZh\nbHVlKCkuZ2V0TmFtZSgpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZhaWwoImJyYW5j\naCBub3QgZm91bmQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfQogICAgICAgICAgICBmYWlsKCJyZWxlYXNlIGNyZWF0aW9uIGZhaWxlZCEg\ndGFnIG5vdCBmb3VuZCIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIHJlbC5kZWxldGUoKTsKICAgICAgICB9CiAgICB9CgogICAgQElnbm9y\nZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVibGlj\nIHZvaWQgdGVzdFJlZigpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nR0hSZWYgbWFzdGVyUmVmID0gZ2l0SHViLmdldFJlcG9zaXRvcnkoImplbmtp\nbnNjaS9qZW5raW5zIikuZ2V0UmVmKCJoZWFkcy9tYXN0ZXIiKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mv\namVua2luc2NpL2plbmtpbnMvZ2l0L3JlZnMvaGVhZHMvbWFzdGVyIiwgbWFz\ndGVyUmVmLmdldFVybCgpLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIEBJZ25v\ncmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIGRpcmVjdG9yeUxpc3RpbmcoKSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIExpc3Q8R0hDb250ZW50PiBjaGlsZHJlbiA9IGdpdEh1Yi5n\nZXRSZXBvc2l0b3J5KCJqZW5raW5zY2kvamVua2lucyIpLmdldERpcmVjdG9y\neUNvbnRlbnQoImNvcmUiKTsKICAgICAgICBmb3IgKEdIQ29udGVudCBjIDog\nY2hpbGRyZW4pIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGMu\nZ2V0TmFtZSgpKTsKICAgICAgICAgICAgaWYgKGMuaXNEaXJlY3RvcnkoKSkg\newogICAgICAgICAgICAgICAgZm9yIChHSENvbnRlbnQgZCA6IGMubGlzdERp\ncmVjdG9yeUNvbnRlbnQoKSkgewogICAgICAgICAgICAgICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbigiICAiICsgZC5nZXROYW1lKCkpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIEBJ\nZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1\nYmxpYyB2b2lkIHRlc3RBZGREZXBsb3lLZXkoKSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIEdIUmVwb3NpdG9yeSBteVJlcG9zaXRvcnkgPSBnZXRU\nZXN0UmVwb3NpdG9yeSgpOwogICAgICAgIGZpbmFsIEdIRGVwbG95S2V5IG5l\nd0RlcGxveUtleSA9IG15UmVwb3NpdG9yeS5hZGREZXBsb3lLZXkoInRlc3Qi\nLCAic3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFEVXQw\nUkF5Y0M1Y1M0MkpLaDZTZWNmRlpCUjFSckYrMmhZTWN0ejRtazc0L2FyQkUr\nd0ZiN2ZuU0hHemRHS1gyaDVDRk9XT0RpZlJDSlZoQjdobFZ4b2R4ZStRa1FR\nWUFFTC94MVdWQ0puR2dUR1FHT3JoT01qOTVWM1VFNXBRS2hzS0Q2MDhDK3U1\ndFNvZmNXWExUb1AxL3daN1U0L0FIanFZaTA4T0xzV1RvSENheDU1VFprdmR0\nMmpvMGhiSW9ZVStYSTlROFV2NE9ORE4xb2FiaU9kZ2VLaTgrY3J2SEF1dk5s\nZWlCaFdWQnpGaDhLZGZ6YUg1dU5kdzdpaGhGakVkMXZ6cUFDc2pDSU5DamRN\nZnpsNmpEOUV4dVd1RTkyblpKbnVjbHMyY0VvTkM2azJhUG1yWkRnOWhBMzJG\nWFZweXNlWStiRFVXRlU2TE8yTEc2UEIga29oc3VrZUBhdGxhcyIpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwobmV3RGVwbG95\nS2V5LmdldElkKCkpOwoKICAgICAgICAgICAgR0hEZXBsb3lLZXkgayA9IEl0\nZXJhYmxlcy5maW5kKG15UmVwb3NpdG9yeS5nZXREZXBsb3lLZXlzKCksIG5l\ndyBQcmVkaWNhdGU8R0hEZXBsb3lLZXk+KCkgewogICAgICAgICAgICAgICAg\ncHVibGljIGJvb2xlYW4gYXBwbHkoR0hEZXBsb3lLZXkgZGVwbG95S2V5KSB7\nCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0RlcGxveUtleS5nZXRJ\nZCgpID09IGRlcGxveUtleS5nZXRJZCgpOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChrKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBuZXdEZXBsb3lLZXku\nZGVsZXRlKCk7CiAgICAgICAgfQogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRz\nIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRl\nc3RDb21taXRTdGF0dXNDb250ZXh0KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBHSFJlcG9zaXRvcnkgbXlSZXBvc2l0b3J5ID0gZ2V0VGVzdFJl\ncG9zaXRvcnkoKTsKICAgICAgICBHSFJlZiBtYXN0ZXJSZWYgPSBteVJlcG9z\naXRvcnkuZ2V0UmVmKCJoZWFkcy9tYXN0ZXIiKTsKICAgICAgICBHSENvbW1p\ndFN0YXR1cyBjb21taXRTdGF0dXMgPSBteVJlcG9zaXRvcnkuY3JlYXRlQ29t\nbWl0U3RhdHVzKG1hc3RlclJlZi5nZXRPYmplY3QoKS5nZXRTaGEoKSwgR0hD\nb21taXRTdGF0ZS5TVUNDRVNTLCAiaHR0cDovL3d3dy5leGFtcGxlLmNvbSIs\nICJ0ZXN0IiwgInRlc3QvY29udGV4dCIpOwogICAgICAgIGFzc2VydEVxdWFs\ncygidGVzdC9jb250ZXh0IiwgY29tbWl0U3RhdHVzLmdldENvbnRleHQoKSk7\nCgogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQog\nICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RNZW1iZXJQYWdlbmF0aW9u\nKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBTZXQ8R0hVc2VyPiBh\nbGwgPSBuZXcgSGFzaFNldDxHSFVzZXI+KCk7CiAgICAgICAgZm9yIChHSFVz\nZXIgdSA6IGdpdEh1Yi5nZXRPcmdhbml6YXRpb24oR0lUSFVCX0FQSV9URVNU\nX09SRykuZ2V0VGVhbUJ5TmFtZSgiQ29yZSBEZXZlbG9wZXJzIikubGlzdE1l\nbWJlcnMoKSkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4odS5n\nZXRMb2dpbigpKTsKICAgICAgICAgICAgYWxsLmFkZCh1KTsKICAgICAgICB9\nCiAgICAgICAgYXNzZXJ0RmFsc2UoYWxsLmlzRW1wdHkoKSk7CiAgICB9Cgog\nICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAog\nICAgcHVibGljIHZvaWQgdGVzdENvbW1pdFNlYXJjaCgpIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgUGFnZWRTZWFyY2hJdGVyYWJsZTxHSENvbW1p\ndD4gciA9IGdpdEh1Yi5zZWFyY2hDb21taXRzKCkuYXV0aG9yKCJrb2hzdWtl\nIikubGlzdCgpOwogICAgICAgIGFzc2VydFRydWUoci5nZXRUb3RhbENvdW50\nKCkgPiAwKTsKCiAgICAgICAgR0hDb21taXQgZmlyc3RDb21taXQgPSByLml0\nZXJhdG9yKCkubmV4dCgpOwogICAgICAgIGFzc2VydFRydWUoZmlyc3RDb21t\naXQuZ2V0RmlsZXMoKS5zaXplKCkgPiAwKTsKICAgIH0KCiAgICBASWdub3Jl\nKCJOZWVkcyBtb2NraW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMg\ndm9pZCB0ZXN0SXNzdWVTZWFyY2goKSB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICAgIFBhZ2VkU2VhcmNoSXRlcmFibGU8R0hJc3N1ZT4gciA9IGdpdEh1\nYi5zZWFyY2hJc3N1ZXMoKS5tZW50aW9ucygia29oc3VrZSIpLmlzT3Blbigp\nLmxpc3QoKTsKICAgICAgICBmb3IgKEdISXNzdWUgaSA6IHIpIHsKICAgICAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKGkuZ2V0VGl0bGUoKSk7CiAgICAg\nICAgfQogICAgfQoKICAgIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2si\nKQogICAgQFRlc3QgICAvLyBpc3N1ZSAjOTkKICAgIHB1YmxpYyB2b2lkIHRl\nc3RSZWFkbWUoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIEdIQ29u\ndGVudCByZWFkbWUgPSBnaXRIdWIuZ2V0UmVwb3NpdG9yeSgiZ2l0aHViLWFw\naS10ZXN0LW9yZy90ZXN0LXJlYWRtZSIpLmdldFJlYWRtZSgpOwogICAgICAg\nIGFzc2VydEVxdWFscyhyZWFkbWUuZ2V0TmFtZSgpLCAiUkVBRE1FLm1kIik7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHJlYWRtZS5nZXRDb250ZW50KCksICJU\naGlzIGlzIGEgbWFya2Rvd24gcmVhZG1lLlxuIik7CiAgICB9CgoKICAgIEBJ\nZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAgIHB1\nYmxpYyB2b2lkIHRlc3RUcmVlcygpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgR0hUcmVlIG1hc3RlclRyZWUgPSBnaXRIdWIuZ2V0UmVwb3NpdG9y\neSgiZ2l0aHViLWFwaS9naXRodWItYXBpIikuZ2V0VHJlZSgibWFzdGVyIik7\nCiAgICAgICAgYm9vbGVhbiBmb3VuZFJlYWRtZSA9IGZhbHNlOwogICAgICAg\nIGZvciAoR0hUcmVlRW50cnkgZSA6IG1hc3RlclRyZWUuZ2V0VHJlZSgpKSB7\nCiAgICAgICAgICAgIGlmICgicmVhZG1lIi5lcXVhbHNJZ25vcmVDYXNlKGUu\nZ2V0UGF0aCgpLnJlcGxhY2VBbGwoIlxcLm1kIiwgIiIpKSkgewogICAgICAg\nICAgICAgICAgZm91bmRSZWFkbWUgPSB0cnVlOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYXNzZXJ0\nVHJ1ZShmb3VuZFJlYWRtZSk7CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMg\nbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVz\ndFRyZWVzUmVjdXJzaXZlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICBHSFRyZWUgbWFzdGVyVHJlZSA9IGdpdEh1Yi5nZXRSZXBvc2l0b3J5KCJn\naXRodWItYXBpL2dpdGh1Yi1hcGkiKS5nZXRUcmVlUmVjdXJzaXZlKCJtYXN0\nZXIiLCAxKTsKICAgICAgICBib29sZWFuIGZvdW5kVGhpc0ZpbGUgPSBmYWxz\nZTsKICAgICAgICBmb3IgKEdIVHJlZUVudHJ5IGUgOiBtYXN0ZXJUcmVlLmdl\ndFRyZWUoKSkgewogICAgICAgICAgICBpZiAoZS5nZXRQYXRoKCkuZW5kc1dp\ndGgoQXBwVGVzdC5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiLmphdmEiKSkg\newogICAgICAgICAgICAgICAgZm91bmRUaGlzRmlsZSA9IHRydWU7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICBhc3NlcnRUcnVlKGZvdW5kVGhpc0ZpbGUpOwogICAgfQoKICAgIEBU\nZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVwb0xhYmVsKCkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBjbGVhbnVwTGFiZWwoInRlc3QiKTsKICAg\nICAgICBjbGVhbnVwTGFiZWwoInRlc3QyIik7CgogICAgICAgIEdIUmVwb3Np\ndG9yeSByID0gZ2l0SHViLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1hcGktdGVz\ndC1vcmcvdGVzdC1sYWJlbHMiKTsKICAgICAgICBMaXN0PEdITGFiZWw+IGxz\ndCA9IHIubGlzdExhYmVscygpLmFzTGlzdCgpOwogICAgICAgIGZvciAoR0hM\nYWJlbCBsIDogbHN0KSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRs\nbihsLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUo\nbHN0LnNpemUoKSA+IDUpOwogICAgICAgIEdITGFiZWwgZSA9IHIuZ2V0TGFi\nZWwoImVuaGFuY2VtZW50Iik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJlbmhh\nbmNlbWVudCIsIGUuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGUuZ2V0VXJsKCkpOwogICAgICAgIGFzc2VydFRydWUoUGF0dGVybi5tYXRj\naGVzKCJbMC05YS1mQS1GXXs2fSIsIGUuZ2V0Q29sb3IoKSkpOwoKICAgICAg\nICBHSExhYmVsIHQgPSBudWxsOwogICAgICAgIEdITGFiZWwgdDIgPSBudWxs\nOwogICAgICAgIHRyeSB7Ly8gQ1JVRAogICAgICAgICAgICB0ID0gci5jcmVh\ndGVMYWJlbCgidGVzdCIsICIxMjM0NTYiKTsKICAgICAgICAgICAgdDIgPSBy\nLmdldExhYmVsKCJ0ZXN0Iik7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyh0\nLmdldE5hbWUoKSwgdDIuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKHQuZ2V0Q29sb3IoKSwgIjEyMzQ1NiIpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHModC5nZXRDb2xvcigpLCB0Mi5nZXRDb2xvcigpKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKHQuZ2V0RGVzY3JpcHRpb24oKSwgIiIp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHModC5nZXREZXNjcmlwdGlvbigp\nLCB0Mi5nZXREZXNjcmlwdGlvbigpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKHQuZ2V0VXJsKCksIHQyLmdldFVybCgpKTsKCiAgICAgICAgICAgIHQu\nc2V0Q29sb3IoIjAwMDAwMCIpOwoKICAgICAgICAgICAgLy8gVGhpcyBpcyBh\nbm5veWluZyBiZWhhdmlvciwgYnV0IGl0IGlzIGJ5IGRlc2lnbiBhdCB0aGlz\nIHRpbWUuCiAgICAgICAgICAgIC8vIFZlcmlmeWluZyBzbyB3ZSBjYW4ga25v\ndyB3aGVuIGl0IGlzIGZpeGVkLgogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\ndC5nZXRDb2xvcigpLCAiMTIzNDU2Iik7CgogICAgICAgICAgICB0ID0gci5n\nZXRMYWJlbCgidGVzdCIpOwogICAgICAgICAgICB0LnNldERlc2NyaXB0aW9u\nKCJ0aGlzIGlzIGFsc28gYSB0ZXN0Iik7CgogICAgICAgICAgICBHSExhYmVs\nIHQzID0gci5nZXRMYWJlbCgidGVzdCIpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHModDMuZ2V0Q29sb3IoKSwgIjAwMDAwMCIpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHModDMuZ2V0RGVzY3JpcHRpb24oKSwgInRoaXMgaXMgYWxz\nbyBhIHRlc3QiKTsKICAgICAgICAgICAgdC5kZWxldGUoKTsKCiAgICAgICAg\nICAgIHQgPSByLmNyZWF0ZUxhYmVsKCJ0ZXN0MiIsICIxMjM0NTciLCAidGhp\ncyBpcyBhIGRpZmZlcmVudCB0ZXN0Iik7CiAgICAgICAgICAgIHQyID0gci5n\nZXRMYWJlbCgidGVzdDIiKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHQu\nZ2V0TmFtZSgpLCB0Mi5nZXROYW1lKCkpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHModC5nZXRDb2xvcigpLCAiMTIzNDU3Iik7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscyh0LmdldENvbG9yKCksIHQyLmdldENvbG9yKCkpOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHModC5nZXREZXNjcmlwdGlvbigpLCAidGhp\ncyBpcyBhIGRpZmZlcmVudCB0ZXN0Iik7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyh0LmdldERlc2NyaXB0aW9uKCksIHQyLmdldERlc2NyaXB0aW9uKCkp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHModC5nZXRVcmwoKSwgdDIuZ2V0\nVXJsKCkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsZWFu\ndXBMYWJlbCgidGVzdCIpOwogICAgICAgICAgICBjbGVhbnVwTGFiZWwoInRl\nc3QyIik7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgY2xlYW51cExhYmVs\nKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYgKG1vY2tHaXRIdWIuaXNVc2VQ\ncm94eSgpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBH\nSExhYmVsIHQgPSBnaXRIdWJCZWZvcmVBZnRlci5nZXRSZXBvc2l0b3J5KCJn\naXRodWItYXBpLXRlc3Qtb3JnL3Rlc3QtbGFiZWxzIikuZ2V0TGFiZWwoInRl\nc3QiKTsKICAgICAgICAgICAgICAgIHQuZGVsZXRlKCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKCiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVj\nayIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFN1YnNjcmliZXJz\nKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBib29sZWFuIGtvaHN1\na2UgPSBmYWxzZTsKICAgICAgICBHSFJlcG9zaXRvcnkgbXIgPSBnaXRIdWIu\nZ2V0UmVwb3NpdG9yeSgiZ2l0aHViLWFwaS9naXRodWItYXBpIik7CiAgICAg\nICAgZm9yIChHSFVzZXIgdSA6IG1yLmxpc3RTdWJzY3JpYmVycygpKSB7CiAg\nICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbih1LmdldExvZ2luKCkpOwog\nICAgICAgICAgICBrb2hzdWtlIHw9IHUuZ2V0TG9naW4oKS5lcXVhbHMoImtv\naHN1a2UiKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShrb2hzdWtl\nKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIi0tLSIpOwoKICAgICAg\nICBib29sZWFuIGdpdGh1YkFwaSA9IGZhbHNlOwogICAgICAgIGZvciAoR0hS\nZXBvc2l0b3J5IHIgOiBnaXRIdWIuZ2V0VXNlcigia29oc3VrZSIpLmxpc3RS\nZXBvc2l0b3JpZXMoKSkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oci5nZXROYW1lKCkpOwogICAgICAgICAgICBnaXRodWJBcGkgfD0gci5l\ncXVhbHMobXIpOwogICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKGdpdGh1\nYkFwaSk7CiAgICB9CgogICAgQElnbm9yZSgiTmVlZHMgbW9ja2luZyBjaGVj\nayIpCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgbm90aWZpY2F0aW9ucygp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGJvb2xlYW4gZm91bmQgPSBm\nYWxzZTsKICAgICAgICBmb3IgKEdIVGhyZWFkIHQgOiBnaXRIdWIubGlzdE5v\ndGlmaWNhdGlvbnMoKS5ub25CbG9ja2luZyh0cnVlKS5yZWFkKHRydWUpKSB7\nCiAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgIGZv\ndW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHQubWFya0FzUmVhZCgpOyAv\nLyB0ZXN0IHRoaXMgYnkgY2FsbGluZyBpdCBvbmNlIG9uIG9sZCBub2ZpY2F0\naW9uCiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCh0\nLmdldFRpdGxlKCkpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHQuZ2V0\nUmVhc29uKCkpOwoKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKHQu\nZ2V0VGl0bGUoKSk7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbih0\nLmdldExhc3RSZWFkQXQoKSk7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp\nbnRsbih0LmdldFR5cGUoKSk7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp\nbnRsbigpOwogICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKGZvdW5kKTsK\nICAgICAgICBnaXRIdWIubGlzdE5vdGlmaWNhdGlvbnMoKS5tYXJrQXNSZWFk\nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBKdXN0IGJhc2ljIGNvZGUgY292\nZXJhZ2UgdG8gbWFrZSBzdXJlIHRvU3RyaW5nKCkgZG9lc24ndCBibG93IHVw\nCiAgICAgKi8KICAgIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQog\nICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIGNoZWNrVG9TdHJpbmcoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBHSFVzZXIgdSA9IGdpdEh1Yi5nZXRV\nc2VyKCJyYWlscyIpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbih1KTsK\nICAgICAgICBHSFJlcG9zaXRvcnkgciA9IHUuZ2V0UmVwb3NpdG9yeSgicmFp\nbHMiKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4ocik7CiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKHIuZ2V0SXNzdWUoMSkpOwogICAgfQoKICAg\nIEBJZ25vcmUoIk5lZWRzIG1vY2tpbmcgY2hlY2siKQogICAgQFRlc3QKICAg\nIHB1YmxpYyB2b2lkIHJlYWN0aW9ucygpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIEdISXNzdWUgaSA9IGdpdEh1Yi5nZXRSZXBvc2l0b3J5KCJnaXRo\ndWItYXBpL2dpdGh1Yi1hcGkiKS5nZXRJc3N1ZSgzMTEpOwoKICAgICAgICAv\nLyByZXRyaWV2YWwKICAgICAgICBHSFJlYWN0aW9uIHIgPSBpLmxpc3RSZWFj\ndGlvbnMoKS5pdGVyYXRvcigpLm5leHQoKTsKICAgICAgICBhc3NlcnRUaGF0\nKHIuZ2V0VXNlcigpLmdldExvZ2luKCksIGlzKCJrb2hzdWtlIikpOwogICAg\nICAgIGFzc2VydFRoYXQoci5nZXRDb250ZW50KCksIGlzKFJlYWN0aW9uQ29u\ndGVudC5IRUFSVCkpOwoKICAgICAgICAvLyBDUlVECiAgICAgICAgR0hSZWFj\ndGlvbiBhID0gaS5jcmVhdGVSZWFjdGlvbihSZWFjdGlvbkNvbnRlbnQuSE9P\nUkFZKTsKICAgICAgICBhc3NlcnRUaGF0KGEuZ2V0VXNlcigpLmdldExvZ2lu\nKCksIGlzKGdpdEh1Yi5nZXRNeXNlbGYoKS5nZXRMb2dpbigpKSk7CiAgICAg\nICAgYS5kZWxldGUoKTsKICAgIH0KCiAgICBASWdub3JlKCJOZWVkcyBtb2Nr\naW5nIGNoZWNrIikKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCBsaXN0T3Jn\nTWVtYmVyc2hpcHMoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBHSE15\nc2VsZiBtZSA9IGdpdEh1Yi5nZXRNeXNlbGYoKTsKICAgICAgICBmb3IgKEdI\nTWVtYmVyc2hpcCBtIDogbWUubGlzdE9yZ01lbWJlcnNoaXBzKCkpIHsKICAg\nICAgICAgICAgYXNzZXJ0VGhhdChtLmdldFVzZXIoKSwgaXMoKEdIVXNlcikg\nbWUpKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChtLmdldFN0YXRlKCkp\nOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKG0uZ2V0Um9sZSgpKTsKCiAg\nICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRmKCIlcyAlcyAlc1xuIiwKICAg\nICAgICAgICAgICAgIG0uZ2V0T3JnYW5pemF0aW9uKCkuZ2V0TG9naW4oKSwK\nICAgICAgICAgICAgICAgIG0uZ2V0U3RhdGUoKSwKICAgICAgICAgICAgICAg\nIG0uZ2V0Um9sZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgQElnbm9yZSgi\nTmVlZHMgbW9ja2luZyBjaGVjayIpCiAgICBAVGVzdAogICAgcHVibGljIHZv\naWQgYmxvYigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEdIUmVwb3Np\ndG9yeSByID0gZ2l0SHViLmdldFJlcG9zaXRvcnkoImdpdGh1Yi1hcGkvZ2l0\naHViLWFwaSIpOwogICAgICAgIFN0cmluZyBzaGExID0gImExMjI0M2YyZmM1\nYjhjMmJhNDdkZDY3N2QwYjBjNzU4MzUzOTU4NGQiOwoKICAgICAgICBhc3Nl\ncnRCbG9iQ29udGVudChyLnJlYWRCbG9iKHNoYTEpKTsKCiAgICAgICAgR0hC\nbG9iIGJsb2IgPSByLmdldEJsb2Ioc2hhMSk7CiAgICAgICAgYXNzZXJ0Qmxv\nYkNvbnRlbnQoYmxvYi5yZWFkKCkpOwogICAgICAgIGFzc2VydFRoYXQoYmxv\nYi5nZXRTaGEoKSwgaXMoImExMjI0M2YyZmM1YjhjMmJhNDdkZDY3N2QwYjBj\nNzU4MzUzOTU4NGQiKSk7CiAgICAgICAgYXNzZXJ0VGhhdChibG9iLmdldFNp\nemUoKSwgaXMoMTEwNEwpKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgYXNz\nZXJ0QmxvYkNvbnRlbnQoSW5wdXRTdHJlYW0gaXMpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIFN0cmluZyBjb250ZW50ID0gbmV3IFN0cmluZyhJT1V0\naWxzLnRvQnl0ZUFycmF5KGlzKSwgIlVURi04Iik7CiAgICAgICAgYXNzZXJ0\nVGhhdChjb250ZW50LCBjb250YWluc1N0cmluZygiQ29weXJpZ2h0IChjKSAy\nMDExLSBLb2hzdWtlIEthd2FndWNoaSBhbmQgb3RoZXIgY29udHJpYnV0b3Jz\nIikpOwogICAgICAgIGFzc2VydFRoYXQoY29udGVudCwgY29udGFpbnNTdHJp\nbmcoIkZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNP\nRlRXQVJFIE9SIFRIRSBVU0UgT1IiKSk7CiAgICAgICAgYXNzZXJ0VGhhdChj\nb250ZW50Lmxlbmd0aCgpLCBpcygxMTA0KSk7CiAgICB9Cn0K\n",
  "encoding": "base64"
}
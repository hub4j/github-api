[
  {
    "url": "https://api.github.com/repos/hub4j/github-api/issues/comments/664563874",
    "html_url": "https://github.com/hub4j/github-api/issues/901#issuecomment-664563874",
    "issue_url": "https://api.github.com/repos/hub4j/github-api/issues/901",
    "id": 664563874,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDU2Mzg3NA==",
    "user": {
      "login": "bitwiseman",
      "id": 1958953,
      "node_id": "MDQ6VXNlcjE5NTg5NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1958953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwiseman",
      "html_url": "https://github.com/bitwiseman",
      "followers_url": "https://api.github.com/users/bitwiseman/followers",
      "following_url": "https://api.github.com/users/bitwiseman/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwiseman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwiseman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwiseman/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwiseman/orgs",
      "repos_url": "https://api.github.com/users/bitwiseman/repos",
      "events_url": "https://api.github.com/users/bitwiseman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwiseman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-27T18:27:58Z",
    "updated_at": "2020-07-27T18:27:58Z",
    "author_association": "COLLABORATOR",
    "body": "> Error when I upload a 60M file.\r\n\r\nSounds like basic java memory limitations.  Try adding `-Xmx1g` and/or `-Xms1g` to your java options.  If that doesn't work use `2g` instead of `1g`.   That should mitigate this issue. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hub4j/github-api/issues/comments/664585491",
    "html_url": "https://github.com/hub4j/github-api/issues/901#issuecomment-664585491",
    "issue_url": "https://api.github.com/repos/hub4j/github-api/issues/901",
    "id": 664585491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDU4NTQ5MQ==",
    "user": {
      "login": "bitwiseman",
      "id": 1958953,
      "node_id": "MDQ6VXNlcjE5NTg5NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1958953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwiseman",
      "html_url": "https://github.com/bitwiseman",
      "followers_url": "https://api.github.com/users/bitwiseman/followers",
      "following_url": "https://api.github.com/users/bitwiseman/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwiseman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwiseman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwiseman/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwiseman/orgs",
      "repos_url": "https://api.github.com/users/bitwiseman/repos",
      "events_url": "https://api.github.com/users/bitwiseman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwiseman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-27T19:12:31Z",
    "updated_at": "2020-07-27T19:12:52Z",
    "author_association": "COLLABORATOR",
    "body": "The problem here is that the GitHub Blob API takes JSON with `content` field containing the contents of the new blob as Base64 encoded characters.  For simplicity, we currently eagerly convert bytes to a Base64 string, add that string to a JSON object (which we then also eagerly convert to a string), and then send that JSON string.  \r\n\r\nIn this case that results in us allocating a 60M `byte[]`, then allocating a 80M Base64 `String`, then allocating a slightly-more than 80M `String` of the final JSON to be sent.  These are all immediately discarded, but you need to have enough space to hold them. \r\n\r\nOn solution would be to add a new `GHTreeBuilder.add(InputStream)` method (along with [`GHBlobBuilder.binaryContent(InputStream)`](https://github.com/hub4j/github-api/blob/1d344b016f9c9d9083f1946c3d1ebb5200460c40/src/main/java/org/kohsuke/github/GHBlobBuilder.java#L38-L43)).  This would make it so we at least don't do the first 60M allocation, we could read directly to Base64 string.  The next step might be to add a `GitHubRequest.Builder.with(String name, InputStream value)`.  We could might then avoid another 80M allocation.  Finally, `GHBlobBuilder` could be changed to use use the `GitHubRequest.Builder.with(InputStream)` method and stream the the entire JSON object directly instead of building it before hand. \r\n\r\nAll of these are good ideas that would reduce memory allocation, but they would also take time to implement and add complexity to the code. That last step would be particularly involved.  However, maybe this could be combined with #903 - give the consumers of  `GitHubRequest.Builder` more of the responsibility for deciding how parameters and data are sent.  \r\n\r\nStill, this won't happen any time soon unless someone else want to spend the time on it. Until then the workaround above is the way to go.\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hub4j/github-api/issues/comments/667112962",
    "html_url": "https://github.com/hub4j/github-api/issues/901#issuecomment-667112962",
    "issue_url": "https://api.github.com/repos/hub4j/github-api/issues/901",
    "id": 667112962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzExMjk2Mg==",
    "user": {
      "login": "onedrive-x",
      "id": 53255535,
      "node_id": "MDQ6VXNlcjUzMjU1NTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/53255535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onedrive-x",
      "html_url": "https://github.com/onedrive-x",
      "followers_url": "https://api.github.com/users/onedrive-x/followers",
      "following_url": "https://api.github.com/users/onedrive-x/following{/other_user}",
      "gists_url": "https://api.github.com/users/onedrive-x/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onedrive-x/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onedrive-x/subscriptions",
      "organizations_url": "https://api.github.com/users/onedrive-x/orgs",
      "repos_url": "https://api.github.com/users/onedrive-x/repos",
      "events_url": "https://api.github.com/users/onedrive-x/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onedrive-x/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-31T13:13:13Z",
    "updated_at": "2020-07-31T13:13:13Z",
    "author_association": "NONE",
    "body": "Thanks.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hub4j/github-api/issues/comments/667414917",
    "html_url": "https://github.com/hub4j/github-api/issues/901#issuecomment-667414917",
    "issue_url": "https://api.github.com/repos/hub4j/github-api/issues/901",
    "id": 667414917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzQxNDkxNw==",
    "user": {
      "login": "bitwiseman",
      "id": 1958953,
      "node_id": "MDQ6VXNlcjE5NTg5NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1958953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwiseman",
      "html_url": "https://github.com/bitwiseman",
      "followers_url": "https://api.github.com/users/bitwiseman/followers",
      "following_url": "https://api.github.com/users/bitwiseman/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwiseman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwiseman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwiseman/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwiseman/orgs",
      "repos_url": "https://api.github.com/users/bitwiseman/repos",
      "events_url": "https://api.github.com/users/bitwiseman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwiseman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-31T22:40:32Z",
    "updated_at": "2020-07-31T22:40:32Z",
    "author_association": "COLLABORATOR",
    "body": "@onedrive-x  Does the workaround work for you? \r\n",
    "performed_via_github_app": null
  }
]
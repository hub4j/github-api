<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GHPullRequestSearchBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GitHub API for Java</a> &gt; <a href="index.source.html" class="el_package">org.kohsuke.github</a> &gt; <span class="el_source">GHPullRequestSearchBuilder.java</span></div><h1>GHPullRequestSearchBuilder.java</h1><pre class="source lang-java linenums">package org.kohsuke.github;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

/**
 * Search for pull requests by main search terms in order to narrow down search results.
 *
 * @author Konstantin Gromov
 * @see &lt;a href=&quot;https://docs.github.com/en/search-github/searching-on-github/searching-issues-and-pull-requests&quot;&gt;Search
 *      issues and PRs&lt;/a&gt;
 */
public class GHPullRequestSearchBuilder extends GHSearchBuilder&lt;GHPullRequest&gt; {
    /**
     * The sort order values.
     */
<span class="fc" id="L17">    public enum Sort {</span>

        /** The comments. */
<span class="fc" id="L20">        COMMENTS,</span>
        /** The created. */
<span class="fc" id="L22">        CREATED,</span>
        /** The relevance. */
<span class="fc" id="L24">        RELEVANCE,</span>
        /** The updated. */
<span class="fc" id="L26">        UPDATED</span>

    }

    private static class PullRequestSearchResult extends SearchResult&lt;GHPullRequest&gt; {

        private GHPullRequest[] items;

        @Override
        GHPullRequest[] getItems(GitHub root) {
<span class="fc" id="L36">            return items;</span>
        }
    }

    /**
     * Instantiates a new GH search builder.
     *
     * @param root
     *            the root
     */
    GHPullRequestSearchBuilder(GitHub root) {
<span class="fc" id="L47">        super(root, PullRequestSearchResult.class);</span>
<span class="fc" id="L48">    }</span>

    /**
     * Assigned to gh pull request user.
     *
     * @param u
     *            the gh user
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder assigned(GHUser u) {
<span class="fc" id="L58">        q(&quot;assignee&quot;, u.getLogin());</span>
<span class="fc" id="L59">        return this;</span>
    }

    /**
     * Author gh pull request search builder.
     *
     * @param user
     *            the user as pr author
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder author(GHUser user) {
<span class="fc" id="L70">        q(&quot;author&quot;, user.getLogin());</span>
<span class="fc" id="L71">        return this;</span>
    }

    /**
     * Base gh pull request search builder.
     *
     * @param branch
     *            the base branch
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder base(GHBranch branch) {
<span class="fc" id="L82">        q(&quot;base&quot;, branch.getName());</span>
<span class="fc" id="L83">        return this;</span>
    }

    /**
     * Closed gh pull request search builder.
     *
     * @param closed
     *            the closed
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder closed(LocalDate closed) {
<span class="fc" id="L94">        q(&quot;closed&quot;, closed.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L95">        return this;</span>
    }

    /**
     * Closed gh pull request search builder.
     *
     * @param from
     *            the closed starting from
     * @param to
     *            the closed ending to
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder closed(LocalDate from, LocalDate to) {
<span class="fc" id="L108">        String closedRange = from.format(DateTimeFormatter.ISO_DATE) + &quot;..&quot; + to.format(DateTimeFormatter.ISO_DATE);</span>
<span class="fc" id="L109">        q(&quot;closed&quot;, closedRange);</span>
<span class="fc" id="L110">        return this;</span>
    }

    /**
     * ClosedAfter gh pull request search builder.
     *
     * @param closed
     *            the closed
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder closedAfter(LocalDate closed, boolean inclusive) {
<span class="pc bpc" id="L123" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&gt;=&quot; : &quot;&gt;&quot;;</span>
<span class="fc" id="L124">        q(&quot;closed:&quot; + comparisonSign + closed.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L125">        return this;</span>
    }

    /**
     * ClosedBefore gh pull request search builder.
     *
     * @param closed
     *            the closed
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder closedBefore(LocalDate closed, boolean inclusive) {
<span class="pc bpc" id="L138" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&lt;=&quot; : &quot;&lt;&quot;;</span>
<span class="fc" id="L139">        q(&quot;closed:&quot; + comparisonSign + closed.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L140">        return this;</span>
    }

    /**
     * Commit gh pull request search builder.
     *
     * @param sha
     *            the commit SHA
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder commit(String sha) {
<span class="fc" id="L151">        q(&quot;SHA&quot;, sha);</span>
<span class="fc" id="L152">        return this;</span>
    }

    /**
     * Created gh pull request search builder.
     *
     * @param created
     *            the createdAt
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder created(LocalDate created) {
<span class="fc" id="L163">        q(&quot;created&quot;, created.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L164">        return this;</span>
    }

    /**
     * Created gh pull request search builder.
     *
     * @param from
     *            the createdAt starting from
     * @param to
     *            the createdAt ending to
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder created(LocalDate from, LocalDate to) {
<span class="fc" id="L177">        String createdRange = from.format(DateTimeFormatter.ISO_DATE) + &quot;..&quot; + to.format(DateTimeFormatter.ISO_DATE);</span>
<span class="fc" id="L178">        q(&quot;created&quot;, createdRange);</span>
<span class="fc" id="L179">        return this;</span>
    }

    /**
     * CreatedAfter gh pull request search builder.
     *
     * @param created
     *            the createdAt
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder createdAfter(LocalDate created, boolean inclusive) {
<span class="pc bpc" id="L192" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&gt;=&quot; : &quot;&gt;&quot;;</span>
<span class="fc" id="L193">        q(&quot;created:&quot; + comparisonSign + created.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L194">        return this;</span>
    }

    /**
     * CreatedBefore gh pull request search builder.
     *
     * @param created
     *            the createdAt
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder createdBefore(LocalDate created, boolean inclusive) {
<span class="pc bpc" id="L207" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&lt;=&quot; : &quot;&lt;&quot;;</span>
<span class="fc" id="L208">        q(&quot;created:&quot; + comparisonSign + created.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L209">        return this;</span>
    }

    /**
     * CreatedByMe gh pull request search builder.
     *
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder createdByMe() {
<span class="fc" id="L218">        q(&quot;author:@me&quot;);</span>
<span class="fc" id="L219">        return this;</span>
    }

    /**
     * Head gh pull request search builder.
     *
     * @param branch
     *            the head branch
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder head(GHBranch branch) {
<span class="fc" id="L230">        q(&quot;head&quot;, branch.getName());</span>
<span class="fc" id="L231">        return this;</span>
    }

    /**
     * Labels gh pull request search builder.
     *
     * @param labels
     *            the labels
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder inLabels(Iterable&lt;String&gt; labels) {
<span class="fc" id="L242">        q(&quot;label&quot;, String.join(&quot;,&quot;, labels));</span>
<span class="fc" id="L243">        return this;</span>
    }

    /**
     * Is closed gh pull request search builder.
     *
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder isClosed() {
<span class="fc" id="L252">        return q(&quot;is:closed&quot;);</span>
    }

    /**
     * Is draft gh pull request search builder.
     *
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder isDraft() {
<span class="fc" id="L261">        return q(&quot;draft:true&quot;);</span>
    }

    /**
     * Is merged gh pull request search builder.
     *
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder isMerged() {
<span class="fc" id="L270">        return q(&quot;is:merged&quot;);</span>
    }

    /**
     * Is open gh pull request search builder.
     *
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder isOpen() {
<span class="fc" id="L279">        return q(&quot;is:open&quot;);</span>
    }

    /**
     * Label gh pull request search builder.
     *
     * @param label
     *            the label
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder label(String label) {
<span class="fc" id="L290">        q(&quot;label&quot;, label);</span>
<span class="fc" id="L291">        return this;</span>
    }

    @Override
    public PagedSearchIterable&lt;GHPullRequest&gt; list() {
<span class="fc" id="L296">        this.q(&quot;is:pr&quot;);</span>
<span class="fc" id="L297">        return super.list();</span>
    }

    /**
     * Mentions gh pull request search builder.
     *
     * @param u
     *            the gh user
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder mentions(GHUser u) {
<span class="fc" id="L308">        q(&quot;mentions&quot;, u.getLogin());</span>
<span class="fc" id="L309">        return this;</span>
    }

    /**
     * Merged gh pull request search builder.
     *
     * @param merged
     *            the merged
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder merged(LocalDate merged) {
<span class="fc" id="L320">        q(&quot;merged&quot;, merged.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L321">        return this;</span>
    }

    /**
     * Merged gh pull request search builder.
     *
     * @param from
     *            the merged starting from
     * @param to
     *            the merged ending to
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder merged(LocalDate from, LocalDate to) {
<span class="fc" id="L334">        String mergedRange = from.format(DateTimeFormatter.ISO_DATE) + &quot;..&quot; + to.format(DateTimeFormatter.ISO_DATE);</span>
<span class="fc" id="L335">        q(&quot;merged&quot;, mergedRange);</span>
<span class="fc" id="L336">        return this;</span>
    }

    /**
     * MergedAfter gh pull request search builder.
     *
     * @param merged
     *            the merged
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder mergedAfter(LocalDate merged, boolean inclusive) {
<span class="pc bpc" id="L349" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&gt;=&quot; : &quot;&gt;&quot;;</span>
<span class="fc" id="L350">        q(&quot;merged:&quot; + comparisonSign + merged.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L351">        return this;</span>
    }

    /**
     * MergedBefore gh pull request search builder.
     *
     * @param merged
     *            the merged
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder mergedBefore(LocalDate merged, boolean inclusive) {
<span class="pc bpc" id="L364" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&lt;=&quot; : &quot;&lt;&quot;;</span>
<span class="fc" id="L365">        q(&quot;merged:&quot; + comparisonSign + merged.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L366">        return this;</span>
    }

    /**
     * Order gh pull request search builder.
     *
     * @param direction
     *            the direction
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder order(GHDirection direction) {
<span class="fc" id="L377">        req.with(&quot;order&quot;, direction);</span>
<span class="fc" id="L378">        return this;</span>
    }

    @Override
    public GHPullRequestSearchBuilder q(String term) {
<span class="fc" id="L383">        super.q(term);</span>
<span class="fc" id="L384">        return this;</span>
    }

    /**
     * Repository gh pull request search builder.
     *
     * @param repository
     *            the repository
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder repo(GHRepository repository) {
<span class="fc" id="L395">        q(&quot;repo&quot;, repository.getFullName());</span>
<span class="fc" id="L396">        return this;</span>
    }

    /**
     * Sort gh pull request search builder.
     *
     * @param sort
     *            the sort
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder sort(GHPullRequestSearchBuilder.Sort sort) {
<span class="fc" id="L407">        req.with(&quot;sort&quot;, sort);</span>
<span class="fc" id="L408">        return this;</span>
    }

    /**
     * Title like search term
     *
     * @param title
     *            the title to be matched
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder titleLike(String title) {
<span class="fc" id="L419">        q(title + &quot; in:title&quot;);</span>
<span class="fc" id="L420">        return this;</span>
    }

    /**
     * Updated gh pull request search builder.
     *
     * @param updated
     *            the updated
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder updated(LocalDate updated) {
<span class="fc" id="L431">        q(&quot;updated&quot;, updated.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L432">        return this;</span>
    }

    /**
     * Updated gh pull request search builder.
     *
     * @param from
     *            the updated starting from
     * @param to
     *            the updated ending to
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder updated(LocalDate from, LocalDate to) {
<span class="fc" id="L445">        String updatedRange = from.format(DateTimeFormatter.ISO_DATE) + &quot;..&quot; + to.format(DateTimeFormatter.ISO_DATE);</span>
<span class="fc" id="L446">        q(&quot;updated&quot;, updatedRange);</span>
<span class="fc" id="L447">        return this;</span>
    }

    /**
     * UpdatedAfter gh pull request search builder.
     *
     * @param updated
     *            the updated
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder updatedAfter(LocalDate updated, boolean inclusive) {
<span class="pc bpc" id="L460" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&gt;=&quot; : &quot;&gt;&quot;;</span>
<span class="fc" id="L461">        q(&quot;updated:&quot; + comparisonSign + updated.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L462">        return this;</span>
    }

    /**
     * UpdatedBefore gh pull request search builder.
     *
     * @param updated
     *            the updated
     * @param inclusive
     *            whether to include date
     * @return the gh pull request search builder
     */
    public GHPullRequestSearchBuilder updatedBefore(LocalDate updated, boolean inclusive) {
<span class="pc bpc" id="L475" title="1 of 2 branches missed.">        String comparisonSign = inclusive ? &quot;&lt;=&quot; : &quot;&lt;&quot;;</span>
<span class="fc" id="L476">        q(&quot;updated:&quot; + comparisonSign + updated.format(DateTimeFormatter.ISO_DATE));</span>
<span class="fc" id="L477">        return this;</span>
    }

    @Override
    protected String getApiUrl() {
<span class="fc" id="L482">        return &quot;/search/issues&quot;;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>